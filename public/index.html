<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PayOS Test Interface - Veena Travel</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- PayOS Checkout Script -->
    <script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-credit-card"></i> PayOS Test Interface</h1>
            <p>Giao diện test tích hợp PayOS cho Veena Travel</p>
        </header>

        <div class="main-content">
            <!-- Product Selection -->
            <div class="product-section">
                <h2><i class="fas fa-shopping-cart"></i> Chọn sản phẩm test</h2>
                <div class="product-grid">
                    <div class="product-card" data-product="basic">
                        <div class="product-icon">
                            <i class="fas fa-map-marked-alt"></i>
                        </div>
                        <h3>Gói Du lịch Cơ bản</h3>
                        <p class="price">100,000 VNĐ</p>
                        <p class="description">Khám phá thành phố Hồ Chí Minh</p>
                        <button class="select-btn" onclick="selectProduct('basic', 100000, 'Gói Du lịch Cơ bản')">
                            Chọn gói này
                        </button>
                    </div>

                    <div class="product-card" data-product="premium">
                        <div class="product-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3>Gói Du lịch Premium</h3>
                        <p class="price">500,000 VNĐ</p>
                        <p class="description">Trải nghiệm đầy đủ với hướng dẫn viên</p>
                        <button class="select-btn" onclick="selectProduct('premium', 500000, 'Gói Du lịch Premium')">
                            Chọn gói này
                        </button>
                    </div>

                    <div class="product-card" data-product="vip">
                        <div class="product-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <h3>Gói Du lịch VIP</h3>
                        <p class="price">1,000,000 VNĐ</p>
                        <p class="description">Dịch vụ cao cấp với xe riêng</p>
                        <button class="select-btn" onclick="selectProduct('vip', 1000000, 'Gói Du lịch VIP')">
                            Chọn gói này
                        </button>
                    </div>
                </div>
            </div>

            <!-- Payment Form -->
            <div class="payment-section" id="paymentSection" style="display: none;">
                <h2><i class="fas fa-credit-card"></i> Thông tin thanh toán</h2>
                
                <div class="selected-product" id="selectedProduct">
                    <!-- Selected product info will be displayed here -->
                </div>

                <form id="paymentForm" class="payment-form">
                    <div class="form-group">
                        <label for="customerName">Tên khách hàng:</label>
                        <input type="text" id="customerName" name="customerName" required 
                               placeholder="Nhập tên của bạn">
                    </div>

                    <div class="form-group">
                        <label for="customerEmail">Email:</label>
                        <input type="email" id="customerEmail" name="customerEmail" required 
                               placeholder="Nhập email của bạn">
                    </div>

                    <div class="form-group">
                        <label for="customerPhone">Số điện thoại:</label>
                        <input type="tel" id="customerPhone" name="customerPhone" required 
                               placeholder="Nhập số điện thoại">
                    </div>

                    <div class="form-group">
                        <label for="description">Ghi chú thêm:</label>
                        <textarea id="description" name="description" rows="3" 
                                  placeholder="Ghi chú thêm về đơn hàng..."></textarea>
                    </div>

                    <div class="payment-actions">
                        <button type="button" class="btn btn-secondary" onclick="goBack()">
                            <i class="fas fa-arrow-left"></i> Quay lại
                        </button>
                        <button type="submit" class="btn btn-primary" id="createPaymentBtn">
                            <i class="fas fa-credit-card"></i> Tạo link thanh toán
                        </button>
                    </div>
                </form>
            </div>

            <!-- Loading State -->
            <div class="loading-section" id="loadingSection" style="display: none;">
                <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                </div>
                <p>Đang tạo link thanh toán...</p>
            </div>

            <!-- Error State -->
            <div class="error-section" id="errorSection" style="display: none;">
                <div class="error-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h3>Lỗi khi tạo thanh toán</h3>
                <p id="errorMessage"></p>
                <button class="btn btn-primary" onclick="resetForm()">
                    <i class="fas fa-refresh"></i> Thử lại
                </button>
            </div>

            <!-- PayOS Embedded Checkout -->
            <div class="payos-checkout-section" id="payosCheckoutSection" style="display: none;">
                <div class="checkout-header">
                    <h2><i class="fas fa-credit-card"></i> Thanh toán PayOS</h2>
                    <button class="btn btn-secondary" onclick="closePayOSCheckout()">
                        <i class="fas fa-times"></i> Đóng
                    </button>
                </div>
                <div class="checkout-container">
                    <div id="payos-checkout-container"></div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <i class="fas fa-server"></i>
                <span>Server: <span id="serverStatus">Checking...</span></span>
            </div>
            <div class="status-item">
                <i class="fas fa-credit-card"></i>
                <span>PayOS: <span id="payosStatus">Checking...</span></span>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
