Tổng quan

Xây dựng một tích hợp thanh toán low-code vào website của bạn.

Bạn có thể nhúng Trang thanh toán trực tiếp vào website hoặc chuyển hướng khách hàng đến trang thanh toán của payOS. payOS hỗ trợ hầu hết ngôn ngữ phổ biến hiện nay như NodeJS, PHP, Java, ... giúp tích hợp dễ dàng và nhanh chóng vào website hoặc ứng dụng.

# Cách hoạt động payOS Checkout

payOS Checkout là một giao diện dựng sẵn, giúp giảm thời gian phát triển.

## Luồng hoạt động[​](#luồng-hoạt-động "Đường dẫn trực tiếp đến Luồng hoạt động")

* Bước 1: Khách hàng thực hiện mua hàng trên Website hoặc ứng dụng của merchant và lựa chọn thanh toán trực tuyến Napas 247 cho đơn hàng.
* Bước 2: Website hoặc ứng dụng của merchant tiến hành gọi [tạo link thanh toán](/docs/api/.md#tag/payment-request/operation/payment-request), payOS sẽ kiểm tra dữ liệu và trả về kết quả chứa link thanh toán. Khi hệ thống của merchant nhận kết quả link thanh toán cần chuyển hướng khách hàng của bạn đến trang checkout của payOS bằng cách mở link thanh toán từ kết quả.
* Bước 3: Khách hàng sử dụng ứng dụng ngân hàng để quét mã VietQR từ link thanh toán.
* Bước 4: Giao dịch ghi nhận thành công tại ngân hàng, payOS sẽ trả kết quả thành công về `returnUrl` gồm: trạng thái, mã đơn hàng, mã link thanh toán, ... Từ kết quả nhận được trên `returnUrl` Website hoặc ứng dụng của merchant hiển thị giao diện thành công.
* Bước 5: Sau khi có kết quả ở giao diện, đồng thời payOS sẽ gửi một [kết quả](/docs/tich-hop-webhook/kiem-tra-du-lieu-voi-signature.md) với đầy đủ thông tin thanh toán tới Webhook của cửa hàng được thiết lập trên <https://my.payos.vn>, sau đó merchant cập nhật trạng thái đơn hàng phù hợp.

<!-- -->

## Cách tích hợp payOS với hệ thống của Merchant[​](#cách-tích-hợp-payos-với-hệ-thống-của-merchant "Đường dẫn trực tiếp đến Cách tích hợp payOS với hệ thống của Merchant")

* Code để [tạo link thanh toán](/docs/api/.md#tag/payment-request/operation/payment-request)
* Code xử lý `returnUrl` và `cancelUrl` để nhận thông báo kết quả Thanh toán và Huỷ đơn hàng trên giao diện.
* Code [webhook](https://www.redhat.com/en/topics/automation/what-is-a-webhook) để nhận kết quả thanh toán của một đơn hàng.

## Low-code[​](#low-code "Đường dẫn trực tiếp đến Low-code")

payOS Checkout với yêu cầu ít code và lựa chọn tốt nhất để tích hợp thanh toán bởi những tính năng có sẵn. Lựa chọn hiển thị giao diện Checkout:

* [Chuyển hướng đến trang payOS Checkout](/docs/checkout/quick-start-payos-hosted-page.md)
* [Mở dialog giao diện thanh toán](/docs/sample/react)
* [Nhúng giao diện thanh toán](/docs/checkout/quick-start-payos-embedded-form.md) vào website hoặc ứng dụng của bạn.

# payOS-Hosted Page - Complete Guide

This page contains all possible combinations of frontend and backend implementations for the payOS-Hosted Page integration.

## HTML + Node.js[​](#html--nodejs "Đường dẫn trực tiếp đến HTML + Node.js")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho NodeJS[​](#cài-đặt-thư-viện-payos-cho-nodejs "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho NodeJS")

```
npm install @payos/node
# hoặc
yarn add @payos/node
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thanh toán thành công[​](#thêm-trang-thanh-toán-thành-công "Đường dẫn trực tiếp đến Thêm trang thanh toán thành công")

Tạo một trang thanh toán đơn hàng thành công cho đường dẫn bạn cung cấp trong `returnUrl` để hiển thị thông báo thanh toán thành công hoặc thông tin đơn hàng cho khách hàng sau khi thanh toán đơn hàng thành công.

### Thêm trang hủy thanh toán[​](#thêm-trang-hủy-thanh-toán "Đường dẫn trực tiếp đến Thêm trang hủy thanh toán")

Tạo trang hủy thanh toán cho đường dẫn bạn cung cấp trong `cancelUrl`. payOS sẽ chuyển hướng khách hàng đến trang này khi khách hàng nhấn hủy thanh toán.

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
npm start
```

### Mã nguồn[​](#mã-nguồn "Đường dẫn trực tiếp đến Mã nguồn")

* server.js
* index.html
* success.html
* cancel.html

/server.js

```
const express = require("express");
const cors = require("cors");
const PayOS = require("@payos/node");

const app = express();
// Keep your PayOS key protected by including it by an env variable
const payOS = new PayOS(
  YOUR_CLIENT_ID,
  YOUR_API_KEY,
  YOUR_CHECKSUM_KEY
);

app.use(cors());
app.use(express.json());
app.use(express.urlencoded({ extended: false }));

app.use("/", express.static("public"));

app.post("/create-payment-link", async (req, res) => {
  const YOUR_DOMAIN = `http://localhost:3030`;
  const body = {
    orderCode: Number(String(Date.now()).slice(-6)),
    amount: 2000,
    description: "Thanh toan don hang",
    items: [
      {
        name: "Mì tôm Hảo Hảo ly",
        quantity: 1,
        price: 2000,
      },
    ],
    returnUrl: `${YOUR_DOMAIN}/success.html`,
    cancelUrl: `${YOUR_DOMAIN}/cancel.html`,
  };

  try {
    const paymentLinkResponse = await payOS.createPaymentLink(body);

    res.redirect(paymentLinkResponse.checkoutUrl);
  } catch (error) {
    console.error(error);
    res.send("Something went error");
  }
});

app.listen(3030, function () {
  console.log(`Server is listening on port 3030`);
});
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <div class="checkout">
        <div class="product">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>

        <form action="/create-payment-link" method="post">
          <button type="submit" id="create-payment-link-btn">
            Tạo Link thanh toán
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
```

/public/success.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thành công</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">
        Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!
      </h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
    <script src="script.js"></script>
  </body>
</html>
```

/public/cancel.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thất bại</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">Thanh toán thất bại</h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
    <script src="script.js"></script>
  </body>
</html>
```

## HTML + PHP[​](#html--php "Đường dẫn trực tiếp đến HTML + PHP")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho PHP[​](#cài-đặt-thư-viện-payos-cho-php "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho PHP")

```
composer require payos/payos
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thanh toán thành công[​](#thêm-trang-thanh-toán-thành-công "Đường dẫn trực tiếp đến Thêm trang thanh toán thành công")

Tạo một trang thanh toán đơn hàng thành công cho đường dẫn bạn cung cấp trong `returnUrl` để hiển thị thông báo thanh toán thành công hoặc thông tin đơn hàng cho khách hàng sau khi thanh toán đơn hàng thành công.

### Thêm trang hủy thanh toán[​](#thêm-trang-hủy-thanh-toán "Đường dẫn trực tiếp đến Thêm trang hủy thanh toán")

Tạo trang hủy thanh toán cho đường dẫn bạn cung cấp trong `cancelUrl`. payOS sẽ chuyển hướng khách hàng đến trang này khi khách hàng nhấn hủy thanh toán.

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
php -S localhost:3030 --docroot=public
```

### Mã nguồn[​](#mã-nguồn-1 "Đường dẫn trực tiếp đến Mã nguồn")

* checkout.php
* index.html
* success.html
* cancel.html

/public/checkout.php

```
<?php

require_once  '../vendor/autoload.php';

use PayOS\PayOS;

// Keep your PayOS key protected by including it by an env variable
$payOSClientId = 'YOUR_CLIENT_ID';
$payOSApiKey = 'YOUR_API_KEY';
$payOSChecksumKey = 'YOUR_CHECKSUM_KEY';

$payOS = new PayOS($payOSClientId, $payOSApiKey, $payOSChecksumKey);

$YOUR_DOMAIN = 'http://localhost:3030';

$data = [
    "orderCode" => intval(substr(strval(microtime(true) * 10000), -6)),
    "amount" => 2000,
    "description" => "Thanh toán đơn hàng",
    "items" => [
        0 => [
            'name' => 'Mì tôm Hảo Hảo ly',
            'price' => 2000,
            'quantity' => 1
        ]
    ],
    "returnUrl" => $YOUR_DOMAIN . "/success.html",
    "cancelUrl" => $YOUR_DOMAIN . "/cancel.html"
];

$response = $payOS->createPaymentLink($data);

header("HTTP/1.1 303 See Other");
header("Location: " . $response['checkoutUrl']);
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <div class="checkout">
        <div class="product">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>

        <form action="/checkout.php" method="post">
          <button type="submit" id="create-payment-link-btn">
            Tạo Link thanh toán
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
```

/public/success.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thành công</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">
        Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!
      </h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
  </body>
</html>
```

/public/cancel.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thất bại</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">Thanh toán thất bại</h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
  </body>
</html>
```

## HTML + Python[​](#html--python "Đường dẫn trực tiếp đến HTML + Python")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Python[​](#cài-đặt-thư-viện-payos-cho-python "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Python")

```
pip install payos
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thanh toán thành công[​](#thêm-trang-thanh-toán-thành-công "Đường dẫn trực tiếp đến Thêm trang thanh toán thành công")

Tạo một trang thanh toán đơn hàng thành công cho đường dẫn bạn cung cấp trong `returnUrl` để hiển thị thông báo thanh toán thành công hoặc thông tin đơn hàng cho khách hàng sau khi thanh toán đơn hàng thành công.

### Thêm trang hủy thanh toán[​](#thêm-trang-hủy-thanh-toán "Đường dẫn trực tiếp đến Thêm trang hủy thanh toán")

Tạo trang hủy thanh toán cho đường dẫn bạn cung cấp trong `cancelUrl`. payOS sẽ chuyển hướng khách hàng đến trang này khi khách hàng nhấn hủy thanh toán.

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
flask run --port=3030
```

### Mã nguồn[​](#mã-nguồn-2 "Đường dẫn trực tiếp đến Mã nguồn")

* server.py
* index.html
* success.html
* cancel.html

/server.py

```
"""
server.py
PayOS Sample.
Python 3.6 or newer required.
"""

import time
from flask import Flask, redirect
from payos import PayOS, ItemData, PaymentData

# Keep your PayOS key protected by including it by an environment variable
client_id = "YOUR_CLIENT_ID"
api_key = "YOUR_API_KEY"
checksum_key = "YOUR_CHECKSUM_KEY"

payos = PayOS(client_id, api_key, checksum_key)

app = Flask(__name__, static_url_path="", static_folder="public")

YOUR_DOMAIN = "http://localhost:3030"


@app.route("/create-payment-link", methods=["POST"])
def create_payment_link():
    try:
        item = ItemData(name="Mì tôm hảo hảo ly", quantity=1, price=2000)
        payment_data = PaymentData(
            orderCode=int(time.time()),
            amount=2000,
            description="Thanh toan don hang",
            items=[item],
            cancelUrl=YOUR_DOMAIN + "/cancel.html",
            returnUrl=YOUR_DOMAIN + "/success.html",
        )
        payment_link_response = payos.createPaymentLink(payment_data)
    except Exception as e:
        return str(e)

    return redirect(payment_link_response.checkoutUrl)


if __name__ == "__main__":
    app.run(port=3030)
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <div class="checkout">
        <div class="product">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>

        <form action="/create-payment-link" method="post">
          <button type="submit" id="create-payment-link-btn">
            Tạo Link thanh toán
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
```

/public/success.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thành công</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">
        Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!
      </h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
  </body>
</html>
```

/public/cancel.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thất bại</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">Thanh toán thất bại</h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
  </body>
</html>
```

## HTML + Go[​](#html--go "Đường dẫn trực tiếp đến HTML + Go")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Go[​](#cài-đặt-thư-viện-payos-cho-go "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Go")

```
go get github.com/payOSHQ/payos-lib-golang
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thanh toán thành công[​](#thêm-trang-thanh-toán-thành-công "Đường dẫn trực tiếp đến Thêm trang thanh toán thành công")

Tạo một trang thanh toán đơn hàng thành công cho đường dẫn bạn cung cấp trong `returnUrl` để hiển thị thông báo thanh toán thành công hoặc thông tin đơn hàng cho khách hàng sau khi thanh toán đơn hàng thành công.

### Thêm trang hủy thanh toán[​](#thêm-trang-hủy-thanh-toán "Đường dẫn trực tiếp đến Thêm trang hủy thanh toán")

Tạo trang hủy thanh toán cho đường dẫn bạn cung cấp trong `cancelUrl`. payOS sẽ chuyển hướng khách hàng đến trang này khi khách hàng nhấn hủy thanh toán.

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
go run server.go
```

### Mã nguồn[​](#mã-nguồn-3 "Đường dẫn trực tiếp đến Mã nguồn")

* server.go
* index.html
* success.html
* cancel.html

/server.go

```
package main

import (
	"log"
	"net/http"
	"time"

	"github.com/payOSHQ/payos-lib-golang"
)

func main() {
	// Keep your PayOS key protected by including it by an env variable
	const clientId = "YOUR_CLIENT_ID"
	const apiKey = "YOUR_API_KEY"
	const checksumKey = "YOUR_CHECKSUM_KEY"

	payos.Key(clientId, apiKey, checksumKey)

	http.Handle("/", http.FileServer(http.Dir("public")))
	http.HandleFunc("/create-payment-link", createPaymentLink)
	addr := "localhost:3030"
	log.Printf("Listening on %s", addr)
	log.Fatal(http.ListenAndServe(addr, nil))
}

func createPaymentLink(w http.ResponseWriter, r *http.Request) {
	domain := "http://localhost:3030"
	paymentLinkRequest := payos.CheckoutRequestType{
		OrderCode:   time.Now().UnixNano() / int64(time.Millisecond),
		Amount:      2000,
		Description: "Thanh toan don hang",
		Items: []payos.Item{{
			Name:     "Mỳ tôm Hảo Hảo",
			Quantity: 1,
			Price:    2000,
		}},
		CancelUrl: domain + "/cancel.html",
		ReturnUrl: domain + "/success.html",
	}

	paymentLinkResponse, err := payos.CreatePaymentLink(paymentLinkRequest)

	if err != nil {
		log.Printf("Create payment link failed: %v", err)
	}

	http.Redirect(w, r, paymentLinkResponse.CheckoutUrl, http.StatusSeeOther)
}
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <div class="checkout">
        <div class="product">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>

        <form action="/create-payment-link" method="post">
          <button type="submit" id="create-payment-link-btn">
            Tạo Link thanh toán
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
```

/public/success.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thành công</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">
        Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!
      </h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
  </body>
</html>
```

/public/cancel.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thất bại</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">Thanh toán thất bại</h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
  </body>
</html>
```

## HTML + .NET[​](#html--net "Đường dẫn trực tiếp đến HTML + .NET")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho .NET[​](#cài-đặt-thư-viện-payos-cho-net "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho .NET")

<!-- -->

* dotnet
* NuGet

```
dotnet add package payOS
```

```
Install-Package payOS
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thanh toán thành công[​](#thêm-trang-thanh-toán-thành-công "Đường dẫn trực tiếp đến Thêm trang thanh toán thành công")

Tạo một trang thanh toán đơn hàng thành công cho đường dẫn bạn cung cấp trong `returnUrl` để hiển thị thông báo thanh toán thành công hoặc thông tin đơn hàng cho khách hàng sau khi thanh toán đơn hàng thành công.

### Thêm trang hủy thanh toán[​](#thêm-trang-hủy-thanh-toán "Đường dẫn trực tiếp đến Thêm trang hủy thanh toán")

Tạo trang hủy thanh toán cho đường dẫn bạn cung cấp trong `cancelUrl`. payOS sẽ chuyển hướng khách hàng đến trang này khi khách hàng nhấn hủy thanh toán.

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
dotnet run
```

### Mã nguồn[​](#mã-nguồn-4 "Đường dẫn trực tiếp đến Mã nguồn")

* Server.cs
* index.html
* success.html
* cancel.html

/Server.cs

```
using Microsoft.AspNetCore;
using Microsoft.AspNetCore.Mvc;
using Net.payOS;
using Net.payOS.Types;

namespace server.Controllers
{
    public class Program
    {
        public static void Main(string[] args)
        {
            WebHost.CreateDefaultBuilder(args)
              .UseUrls("http://localhost:3030")
              .UseWebRoot("public")
              .UseStartup<Startup>()
              .Build()
              .Run();
        }
    }

    public class Startup
    {
        public void ConfigureServices(IServiceCollection services)
        {
            services.AddControllers();
        }
        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
        {
            if (env.IsDevelopment()) app.UseDeveloperExceptionPage();
            app.UseRouting();
            app.UseStaticFiles();
            app.UseEndpoints(endpoints =>
            {
                endpoints.MapControllers();
                endpoints.MapGet("/", context =>
                {
                    context.Response.Redirect("/index.html");
                    return Task.CompletedTask;
                });
            });
        }
    }

    [Route("create-payment-link")]
    [ApiController]
    public class CheckoutApiController : Controller
    {
        [HttpPost]
        public async Task<IActionResult> Create()
        {
            // Keep your PayOS key protected by including it by an env variable
            var clientId = "YOUR_CLIENT_ID";
            var apiKey = "YOUR_API_KEY";
            var checksumKey = "YOUR_CHECKSUM_KEY";

            var payOS = new PayOS(clientId, apiKey, checksumKey);

            var domain = "http://localhost:3030";

            var paymentLinkRequest = new PaymentData(
                orderCode: int.Parse(DateTimeOffset.Now.ToString("ffffff")),
                amount: 2000,
                description: "Thanh toan don hang",
                items: [new("Mì tôm hảo hảo ly", 1, 2000)],
                returnUrl: domain + "/success.html",
                cancelUrl: domain + "/cancel.html"
            );
            var response = await payOS.createPaymentLink(paymentLinkRequest);

            Response.Headers.Append("Location", response.checkoutUrl);
            return new StatusCodeResult(303);
        }
    }
}
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <div class="checkout">
        <div class="product">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>

        <form action="/create-payment-link" method="post">
          <button type="submit" id="create-payment-link-btn">
            Tạo Link thanh toán
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
```

/public/success.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thành công</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">
        Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!
      </h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
  </body>
</html>
```

/public/cancel.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thất bại</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">Thanh toán thất bại</h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
  </body>
</html>
```

## HTML + Java[​](#html--java "Đường dẫn trực tiếp đến HTML + Java")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Java[​](#cài-đặt-thư-viện-payos-cho-java "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Java")

<!-- -->

* Maven
* Gradle

Thêm đoạn code sau vào POM và thay VERSION bằng phiên bản bạn muốn sử dụng.

```
<dependency>
  <groupId>vn.payos</groupId>
  <artifactId>payos-java</artifactId>
  <version>{VERSION}</version>
</dependency>
```

Thêm đoạn code sau vào build.gradle và thay VERSION bằng phiên bản bạn muốn sử dụng.

```
implementation 'vn.payos:payos-java:{VERSION}'
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thanh toán thành công[​](#thêm-trang-thanh-toán-thành-công "Đường dẫn trực tiếp đến Thêm trang thanh toán thành công")

Tạo một trang thanh toán đơn hàng thành công cho đường dẫn bạn cung cấp trong `returnUrl` để hiển thị thông báo thanh toán thành công hoặc thông tin đơn hàng cho khách hàng sau khi thanh toán đơn hàng thành công.

### Thêm trang hủy thanh toán[​](#thêm-trang-hủy-thanh-toán "Đường dẫn trực tiếp đến Thêm trang hủy thanh toán")

Tạo trang hủy thanh toán cho đường dẫn bạn cung cấp trong `cancelUrl`. payOS sẽ chuyển hướng khách hàng đến trang này khi khách hàng nhấn hủy thanh toán.

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
java -cp .\target\payos-payment-1.0-SNAPSHOT-jar-with-dependencies.jar vn.payos.sample.Server
```

### Mã nguồn[​](#mã-nguồn-5 "Đường dẫn trực tiếp đến Mã nguồn")

* Server.java
* pom.xml
* index.html
* success.html
* cancel.html

/Server.java

```
package vn.payos.sample;

import static spark.Spark.post;
import static spark.Spark.port;
import static spark.Spark.staticFiles;

import java.nio.file.Paths;

import vn.payos.PayOS;
import vn.payos.type.CheckoutResponseData;
import vn.payos.type.ItemData;
import vn.payos.type.PaymentData;

public class Server {
    public static void main(String[] args) {
        port(3000);
        String clientId = "YOUR_CLIENT_ID";
        String apiKey = "YOUR_API_KEY";
        String checksumKey = "YOUR_CHECKSUM_KEY";

        final PayOS payOS = new PayOS(clientId, apiKey, checksumKey);

        staticFiles.externalLocation(
                Paths.get("public").toAbsolutePath().toString());

        post("/create-payment-link", (request, response) -> {
            String domain = "http://localhost:3000";
            Long orderCode = System.currentTimeMillis() / 1000;
            ItemData itemData = ItemData
                    .builder()
                    .name("Mỳ tôm Hảo Hảo ly")
                    .quantity(1)
                    .price(2000)
                    .build();

            PaymentData paymentData = PaymentData
                    .builder()
                    .orderCode(orderCode)
                    .amount(2000)
                    .description("Thanh toán đơn hàng")
                    .returnUrl(domain + "/success.html")
                    .cancelUrl(domain + "/cancel.html")
                    .item(itemData)
                    .build();

            CheckoutResponseData result = payOS.createPaymentLink(paymentData);
            response.redirect(result.getCheckoutUrl(), 303);
            return "";
        });
    }
}
```

/pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>vn.payos.sample</groupId>
  <artifactId>payos-payment</artifactId>
  <version>1.0-SNAPSHOT</version>

  <name>sample</name>
  <!-- FIXME change it to the project's website -->
  <url>http://www.example.com</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
  </properties>

  <dependencies>
    <dependency>
      <groupId>com.sparkjava</groupId>
      <artifactId>spark-core</artifactId>
      <version>2.9.4</version>
    </dependency>
    <dependency>
      <groupId>vn.payos</groupId>
      <artifactId>payos-java</artifactId>
      <version>1.0.1</version>
    </dependency>
  </dependencies>

  <build>
    <pluginManagement><!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) -->
      <plugins>
        <!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle -->
        <plugin>
          <artifactId>maven-clean-plugin</artifactId>
          <version>3.1.0</version>
        </plugin>
        <!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging -->
        <plugin>
          <artifactId>maven-resources-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>3.8.0</version>
        </plugin>
        <plugin>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.22.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-jar-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-install-plugin</artifactId>
          <version>2.5.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.8.2</version>
        </plugin>
        <!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle -->
        <plugin>
          <artifactId>maven-site-plugin</artifactId>
          <version>3.7.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-project-info-reports-plugin</artifactId>
          <version>3.0.0</version>
        </plugin>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
            <execution>
                <phase>package</phase>
                <goals>
                <goal>single</goal>
                </goals>
            </execution>
            </executions>
            <configuration>
            <descriptorRefs>
                <!-- This tells Maven to include all dependencies -->
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
            <archive>
                <manifest>
                <mainClass>vn.payos.sample.Server</mainClass>
                </manifest>
            </archive>
            </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
</project>
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <div class="checkout">
        <div class="product">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>

        <form action="/create-payment-link" method="post">
          <button type="submit" id="create-payment-link-btn">
            Tạo Link thanh toán
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
```

/public/success.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thành công</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">
        Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!
      </h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
  </body>
</html>
```

/public/cancel.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thanh toán thất bại</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-box">
      <h4 class="payment-titlte">Thanh toán thất bại</h4>
      <p>
        Nếu có bất kỳ câu hỏi nào, hãy gửi email tới
        <a href="mailto:support@payos.vn">support@payos.vn</a>
      </p>
      <a href="/" id="return-page-btn">Trở về trang Tạo Link thanh toán</a>
    </div>
  </body>
</html>
```

## React + Node.js[​](#react--nodejs "Đường dẫn trực tiếp đến React + Node.js")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho NodeJS[​](#cài-đặt-thư-viện-payos-cho-nodejs "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho NodeJS")

```
npm install @payos/node
# hoặc
yarn add @payos/node
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
npm start
```

### Mã nguồn[​](#mã-nguồn-6 "Đường dẫn trực tiếp đến Mã nguồn")

* server.js
* App.js

/server.js

```
const express = require("express");
const cors = require("cors");
const PayOS = require("@payos/node");

const app = express();
// Keep your PayOS key protected by including it by an env variable
const payOS = new PayOS(
  YOUR_CLIENT_ID,
  YOUR_API_KEY,
  YOUR_CHECKSUM_KEY
);

app.use(cors());
app.use(express.json());
app.use(express.urlencoded({ extended: false }));

app.post("/create-payment-link", async (req, res) => {
  const YOUR_DOMAIN = `http://localhost:3000`;
  const body = {
    orderCode: Number(String(Date.now()).slice(-6)),
    amount: 2000,
    description: "Thanh toan don hang",
    items: [
      {
        name: "Mì tôm Hảo Hảo ly",
        quantity: 1,
        price: 2000,
      },
    ],
    returnUrl: `${YOUR_DOMAIN}?success=true`,
    cancelUrl: `${YOUR_DOMAIN}?canceled=true`,
  };

  try {
    const paymentLinkResponse = await payOS.createPaymentLink(body);

    res.redirect(paymentLinkResponse.checkoutUrl);
  } catch (error) {
    console.error(error);
    res.send("Something went error");
  }
});

app.listen(3030, function () {
  console.log(`Server is listening on port 3030`);
});
```

/src/App.js

```
import React, { useState, useEffect } from "react";
import "./App.css";
const OrderInformation = () => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
      </div>
      <form action="/create-payment-link" method="post">
        <button type="submit" id="create-payment-link-btn">
          Tạo Link thanh toán
        </button>
      </form>
    </div>
  </div>
);

const CheckoutMessage = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  const [message, setMessage] = useState("");

  useEffect(() => {
    // Kiểm tra trạng thái đơn hàng
    const query = new URLSearchParams(window.location.search);

    if (query.get("success")) {
      setMessage("Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!");
    }

    if (query.get("canceled")) {
      setMessage(
        "Thanh toán thất bại. Nếu có bất kỳ câu hỏi nào hãy gửi email tới support@payos.vn."
      );
    }
  }, []);

  return message ? (
    <CheckoutMessage message={message} />
  ) : (
    <OrderInformation />
  );
}
```

## React + PHP[​](#react--php "Đường dẫn trực tiếp đến React + PHP")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho PHP[​](#cài-đặt-thư-viện-payos-cho-php "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho PHP")

```
composer require payos/payos
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
# server side
php -S localhost:3030 --docroot=public

# client side
npm start
```

### Mã nguồn[​](#mã-nguồn-7 "Đường dẫn trực tiếp đến Mã nguồn")

* checkout.php
* App.js

/public/checkout.php

```
<?php

require_once  '../vendor/autoload.php';

use PayOS\PayOS;

// Keep your PayOS key protected by including it by an env variable
$payOSClientId = 'YOUR_CLIENT_ID';
$payOSApiKey = 'YOUR_API_KEY';
$payOSChecksumKey = 'YOUR_CHECKSUM_KEY';

$payOS = new PayOS($payOSClientId, $payOSApiKey, $payOSChecksumKey);

$YOUR_DOMAIN = 'http://localhost:3000';

$data = [
    "orderCode" => intval(substr(strval(microtime(true) * 10000), -6)),
    "amount" => 2000,
    "description" => "Thanh toán đơn hàng",
    "items" => [
        0 => [
            'name' => 'Mì tôm Hảo Hảo ly',
            'price' => 2000,
            'quantity' => 1
        ]
    ],
    "returnUrl" => $YOUR_DOMAIN . "?success=true",
    "cancelUrl" => $YOUR_DOMAIN . "?canceled=true"
];

$response = $payOS->createPaymentLink($data);

header("HTTP/1.1 303 See Other");
header("Location: " . $response['checkoutUrl']);
```

/src/App.js

```
import React, { useState, useEffect } from "react";
import "./App.css";
const OrderInformation = () => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
      </div>
      <form action="/checkout.php" method="post">
        <button type="submit" id="create-payment-link-btn">
          Tạo Link thanh toán
        </button>
      </form>
    </div>
  </div>
);

const CheckoutMessage = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  const [message, setMessage] = useState("");

  useEffect(() => {
    // Kiểm tra trạng thái đơn hàng
    const query = new URLSearchParams(window.location.search);

    if (query.get("success")) {
      setMessage("Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!");
    }

    if (query.get("canceled")) {
      setMessage(
        "Thanh toán thất bại. Nếu có bất kỳ câu hỏi nào hãy gửi email tới support@payos.vn."
      );
    }
  }, []);

  return message ? (
    <CheckoutMessage message={message} />
  ) : (
    <OrderInformation />
  );
}
```

## React + Python[​](#react--python "Đường dẫn trực tiếp đến React + Python")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Python[​](#cài-đặt-thư-viện-payos-cho-python "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Python")

```
pip install payos
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
# server side
flask run --port=3030

# client side
npm start
```

### Mã nguồn[​](#mã-nguồn-8 "Đường dẫn trực tiếp đến Mã nguồn")

* server.py
* App.js

/server.py

```
"""
server.py
PayOS Sample.
Python 3.6 or newer required.
"""

import time
from flask import Flask, redirect
from payos import PayOS, ItemData, PaymentData

# Keep your PayOS key protected by including it by an environment variable
client_id = "YOUR_CLIENT_ID"
api_key = "YOUR_API_KEY"
checksum_key = "YOUR_CHECKSUM_KEY"

payos = PayOS(client_id, api_key, checksum_key)

app = Flask(__name__, static_url_path="", static_folder="public")

YOUR_DOMAIN = "http://localhost:3030"


@app.route("/create-payment-link", methods=["POST"])
def create_payment_link():
    try:
        item = ItemData(name="Mì tôm hảo hảo ly", quantity=1, price=2000)
        payment_data = PaymentData(
            orderCode=int(time.time()),
            amount=2000,
            description="Thanh toan don hang",
            items=[item],
            cancelUrl=YOUR_DOMAIN + "?canceled=true",
            returnUrl=YOUR_DOMAIN + "?success=true",
        )
        payment_link_response = payos.createPaymentLink(payment_data)
    except Exception as e:
        return str(e)

    return redirect(payment_link_response.checkoutUrl)


if __name__ == "__main__":
    app.run(port=3030)
```

/src/App.js

```
import React, { useState, useEffect } from "react";
import "./App.css";
const OrderInformation = () => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
      </div>
      <form action="/create-payment-link" method="post">
        <button type="submit" id="create-payment-link-btn">
          Tạo Link thanh toán
        </button>
      </form>
    </div>
  </div>
);

const CheckoutMessage = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  const [message, setMessage] = useState("");

  useEffect(() => {
    // Kiểm tra trạng thái đơn hàng
    const query = new URLSearchParams(window.location.search);

    if (query.get("success")) {
      setMessage("Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!");
    }

    if (query.get("canceled")) {
      setMessage(
        "Thanh toán thất bại. Nếu có bất kỳ câu hỏi nào hãy gửi email tới support@payos.vn."
      );
    }
  }, []);

  return message ? (
    <CheckoutMessage message={message} />
  ) : (
    <OrderInformation />
  );
}
```

## React + Go[​](#react--go "Đường dẫn trực tiếp đến React + Go")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Go[​](#cài-đặt-thư-viện-payos-cho-go "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Go")

```
go get github.com/payOSHQ/payos-lib-golang
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn tr ực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
# server side
go run server.go

# client side
npm start
```

### Mã nguồn[​](#mã-nguồn-9 "Đường dẫn trực tiếp đến Mã nguồn")

* server.go
* App.js

/server.go

```
package main

import (
	"log"
	"net/http"
	"time"

	"github.com/payOSHQ/payos-lib-golang"
)

func main() {
	// Keep your PayOS key protected by including it by an env variable
	const clientId = "YOUR_CLIENT_ID"
	const apiKey = "YOUR_API_KEY"
	const checksumKey = "YOUR_CHECKSUM_KEY"

	payos.Key(clientId, apiKey, checksumKey)

	http.Handle("/", http.FileServer(http.Dir("public")))
	http.HandleFunc("/create-payment-link", createPaymentLink)
	addr := "localhost:3030"
	log.Printf("Listening on %s", addr)
	log.Fatal(http.ListenAndServe(addr, nil))
}

func createPaymentLink(w http.ResponseWriter, r *http.Request) {
	domain := "http://localhost:3000"
	paymentLinkRequest := payos.CheckoutRequestType{
		OrderCode:   time.Now().UnixNano() / int64(time.Millisecond),
		Amount:      2000,
		Description: "Thanh toan don hang",
		Items: []payos.Item{{
			Name:     "Mỳ tôm Hảo Hảo",
			Quantity: 1,
			Price:    2000,
		}},
		CancelUrl: domain + "?canceled=true",
		ReturnUrl: domain + "?success=true",
	}

	paymentLinkResponse, err := payos.CreatePaymentLink(paymentLinkRequest)

	if err != nil {
		log.Printf("Create payment link failed: %v", err)
	}

	http.Redirect(w, r, paymentLinkResponse.CheckoutUrl, http.StatusSeeOther)
}
```

/src/App.js

```
import React, { useState, useEffect } from "react";
import "./App.css";
const OrderInformation = () => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
      </div>
      <form action="/create-payment-link" method="post">
        <button type="submit" id="create-payment-link-btn">
          Tạo Link thanh toán
        </button>
      </form>
    </div>
  </div>
);

const CheckoutMessage = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  const [message, setMessage] = useState("");

  useEffect(() => {
    // Kiểm tra trạng thái đơn hàng
    const query = new URLSearchParams(window.location.search);

    if (query.get("success")) {
      setMessage("Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!");
    }

    if (query.get("canceled")) {
      setMessage(
        "Thanh toán thất bại. Nếu có bất kỳ câu hỏi nào hãy gửi email tới support@payos.vn."
      );
    }
  }, []);

  return message ? (
    <CheckoutMessage message={message} />
  ) : (
    <OrderInformation />
  );
}
```

## React + .NET[​](#react--net "Đường dẫn trực tiếp đến React + .NET")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho .NET[​](#cài-đặt-thư-viện-payos-cho-net "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho .NET")

<!-- -->

* dotnet
* NuGet

```
dotnet add package payOS
```

```
Install-Package payOS
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
# server side
dotnet run

# client side
npm start
```

### Mã nguồn[​](#mã-nguồn-10 "Đường dẫn trực tiếp đến Mã nguồn")

* Server.cs
* App.js

/Server.cs

```
using Microsoft.AspNetCore;
using Microsoft.AspNetCore.Mvc;
using Net.payOS;
using Net.payOS.Types;

namespace server.Controllers
{
    public class Program
    {
        public static void Main(string[] args)
        {
            WebHost.CreateDefaultBuilder(args)
              .UseUrls("http://localhost:3030")
              .UseWebRoot("public")
              .UseStartup<Startup>()
              .Build()
              .Run();
        }
    }

    public class Startup
    {
        public void ConfigureServices(IServiceCollection services)
        {
            services.AddControllers();
        }
        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
        {
            if (env.IsDevelopment()) app.UseDeveloperExceptionPage();
            app.UseRouting();
            app.UseStaticFiles();
            app.UseEndpoints(endpoints => endpoints.MapControllers());
        }
    }

    [Route("create-payment-link")]
    [ApiController]
    public class CheckoutApiController : Controller
    {
        [HttpPost]
        public async Task<IActionResult> Create()
        {
            // Keep your PayOS key protected by including it by an env variable
            var clientId = "YOUR_CLIENT_ID";
            var apiKey = "YOUR_API_KEY";
            var checksumKey = "YOUR_CHECKSUM_KEY";

            var payOS = new PayOS(clientId, apiKey, checksumKey);

            var domain = "http://localhost:3000";

            var paymentLinkRequest = new PaymentData(
                orderCode: int.Parse(DateTimeOffset.Now.ToString("ffffff")),
                amount: 2000,
                description: "Thanh toan don hang",
                items: [new("Mì tôm hảo hảo ly", 1, 2000)],
                returnUrl: domain + "?success=true",
                cancelUrl: domain + "?canceled=true"
            );
            var response = await payOS.createPaymentLink(paymentLinkRequest);

            Response.Headers.Append("Location", response.checkoutUrl);
            return new StatusCodeResult(303);
        }
    }
}
```

/src/App.js

```
import React, { useState, useEffect } from "react";
import "./App.css";
const OrderInformation = () => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
      </div>
      <form action="/create-payment-link" method="post">
        <button type="submit" id="create-payment-link-btn">
          Tạo Link thanh toán
        </button>
      </form>
    </div>
  </div>
);

const CheckoutMessage = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  const [message, setMessage] = useState("");

  useEffect(() => {
    // Kiểm tra trạng thái đơn hàng
    const query = new URLSearchParams(window.location.search);

    if (query.get("success")) {
      setMessage("Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!");
    }

    if (query.get("canceled")) {
      setMessage(
        "Thanh toán thất bại. Nếu có bất kỳ câu hỏi nào hãy gửi email tới support@payos.vn."
      );
    }
  }, []);

  return message ? (
    <CheckoutMessage message={message} />
  ) : (
    <OrderInformation />
  );
}
```

## React + Java[​](#react--java "Đường dẫn trực tiếp đến React + Java")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Java[​](#cài-đặt-thư-viện-payos-cho-java "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Java")

<!-- -->

* Maven
* Gradle

Thêm đoạn code sau vào POM và thay VERSION bằng phiên bản bạn muốn sử dụng.

```
<dependency>
  <groupId>vn.payos</groupId>
  <artifactId>payos-java</artifactId>
  <version>{VERSION}</version>
</dependency>
```

Thêm đoạn code sau vào build.gradle và thay VERSION bằng phiên bản bạn muốn sử dụng.

```
implementation 'vn.payos:payos-java:{VERSION}'
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Thêm trang thông tin đơn hàng[​](#thêm-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm trang thông tin đơn hàng")

Tạo một trang hiển thị thông tin đơn hàng, cho phép khách hàng xem và sửa thông tin đơn hàng trước khi nhấn thanh toán. Đơn hàng sẽ không thể chỉnh sửa sau khi nhấn thanh toán trừ khi tạo link thanh toán mới.

### Thêm nút bấm thanh toán cho trang thông tin đơn hàng[​](#thêm-nút-bấm-thanh-toán-cho-trang-thông-tin-đơn-hàng "Đường dẫn trực tiếp đến Thêm nút bấm thanh toán cho trang thông tin đơn hàng")

Thêm một nút bấm thanh toán đơn hàng trên trang xem thông tin đơn hàng. Khi khách hàng nhấn nút này sẽ được chuyển hướng đến trang thanh toán của payOS để tiến hàng thanh toán đơn hàng.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
# server side
java -cp .\target\payos-payment-1.0-SNAPSHOT-jar-with-dependencies.jar vn.payos.sample.Server

# client side
npm start
```

### Mã nguồn[​](#mã-nguồn-11 "Đường dẫn trực tiếp đến Mã nguồn")

* Server.java
* pom.xml
* App.js

/Server.java

```
package vn.payos.sample;

import static spark.Spark.post;
import static spark.Spark.port;
import static spark.Spark.staticFiles;

import java.nio.file.Paths;

import vn.payos.PayOS;
import vn.payos.type.CheckoutResponseData;
import vn.payos.type.ItemData;
import vn.payos.type.PaymentData;

public class Server {
    public static void main(String[] args) {
        port(3030);
        String clientId = "YOUR_CLIENT_ID";
        String apiKey = "YOUR_API_KEY";
        String checksumKey = "YOUR_CHECKSUM_KEY";

        final PayOS payOS = new PayOS(clientId, apiKey, checksumKey);

        staticFiles.externalLocation(
                Paths.get("public").toAbsolutePath().toString());

        post("/create-payment-link", (request, response) -> {
            String domain = "http://localhost:3000";
            Long orderCode = System.currentTimeMillis() / 1000;
            ItemData itemData = ItemData
                    .builder()
                    .name("Mỳ tôm Hảo Hảo ly")
                    .quantity(1)
                    .price(2000)
                    .build();

            PaymentData paymentData = PaymentData
                    .builder()
                    .orderCode(orderCode)
                    .amount(2000)
                    .description("Thanh toán đơn hàng")
                    .returnUrl(domain + "/success.html")
                    .cancelUrl(domain + "/cancel.html")
                    .item(itemData)
                    .build();

            CheckoutResponseData result = payOS.createPaymentLink(paymentData);
            response.redirect(result.getCheckoutUrl(), 303);
            return "";
        });
    }
}
```

/pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>vn.payos.sample</groupId>
  <artifactId>payos-payment</artifactId>
  <version>1.0-SNAPSHOT</version>

  <name>sample</name>
  <!-- FIXME change it to the project's website -->
  <url>http://www.example.com</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
  </properties>

  <dependencies>
    <dependency>
      <groupId>com.sparkjava</groupId>
      <artifactId>spark-core</artifactId>
      <version>2.9.4</version>
    </dependency>
    <dependency>
      <groupId>vn.payos</groupId>
      <artifactId>payos-java</artifactId>
      <version>1.0.1</version>
    </dependency>
  </dependencies>

  <build>
    <pluginManagement><!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) -->
      <plugins>
        <!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle -->
        <plugin>
          <artifactId>maven-clean-plugin</artifactId>
          <version>3.1.0</version>
        </plugin>
        <!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging -->
        <plugin>
          <artifactId>maven-resources-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>3.8.0</version>
        </plugin>
        <plugin>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.22.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-jar-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-install-plugin</artifactId>
          <version>2.5.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.8.2</version>
        </plugin>
        <!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle -->
        <plugin>
          <artifactId>maven-site-plugin</artifactId>
          <version>3.7.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-project-info-reports-plugin</artifactId>
          <version>3.0.0</version>
        </plugin>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
            <execution>
                <phase>package</phase>
                <goals>
                <goal>single</goal>
                </goals>
            </execution>
            </executions>
            <configuration>
            <descriptorRefs>
                <!-- This tells Maven to include all dependencies -->
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
            <archive>
                <manifest>
                <mainClass>vn.payos.sample.Server</mainClass>
                </manifest>
            </archive>
            </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
</project>
```

/src/App.js

```
import React, { useState, useEffect } from "react";
import "./App.css";

const ProductDisplay = () => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
      </div>
      <form action="/create-payment-link" method="post">
        <button type="submit" id="create-payment-link-btn">
          Tạo Link thanh toán
        </button>
      </form>
    </div>
  </div>
);

const Message = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div className="product">
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  const [message, setMessage] = useState("");

  useEffect(() => {
    // Check to see if this is a redirect back from Checkout
    const query = new URLSearchParams(window.location.search);

    if (query.get("success")) {
      setMessage("Thanh toán thành công. Cảm ơn bạn đã sử dụng payOS!");
    }

    if (query.get("canceled")) {
      setMessage(
        "Thanh toán thất bại. Nếu có bất kỳ câu hỏi nào hãy gửi email tới support@payos.vn."
      );
    }
  }, []);

  return message ? (
    <Message message={message} />
  ) : (
    <ProductDisplay />
  );
}
```

# payOS Embedded Form - Complete Guide

This page contains all possible combinations of frontend and backend implementations for the payOS Embedded Form integration.

## HTML + Node.js[​](#html--nodejs "Đường dẫn trực tiếp đến HTML + Node.js")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho NodeJS[​](#cài-đặt-thư-viện-payos-cho-nodejs "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho NodeJS")

```
npm install @payos/node
# hoặc
yarn add @payos/node
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout bằng link cdn[​](#cài-đặt-thư-viện-payos-checkout-bằng-link-cdn "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout bằng link cdn")

```
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
```

### Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán[​](#thêm-nút-tạo-link-thanh-toán-và-thêm-div-nhúng-giao-diện-thanh-toán "Đường dẫn trực tiếp đến Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán")

Thêm 1 nút bấm tạo link thanh toán trên trang xem thông tin đơn hàng để gọi API tạo link thanh toán và 1 div có trường id riêng biệt được sử dụng để nhúng giao diện thanh toán trên trang web

### Khởi tạo config cho hook usePayOS[​](#khởi-tạo-config-cho-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó[​](#thực-hiện-gọi-hook-usepayos-với-config-đã-khởi-tạo-trước-đó "Đường dẫn trực tiếp đến Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó")

usePayOS hook trả về 2 hàm **open()** và **exit()**.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
npm start
```

### Mã nguồn[​](#mã-nguồn "Đường dẫn trực tiếp đến Mã nguồn")

* server.js
* index.html
* index.js

/server.js

```
const express = require("express");
const dotenv = require("dotenv");
const cors = require("cors");
const PayOS = require("@payos/node");

const app = express();
dotenv.config();
const payOS = new PayOS(
  process.env.PAYOS_CLIENT_ID,
  process.env.PAYOS_API_KEY,
  process.env.PAYOS_CHECKSUM_KEY
);

app.use(cors());
app.use(express.json());
app.use(express.urlencoded({ extended: false }));

app.post("/create-embedded-payment-link", async (req, res) => {
  const YOUR_DOMAIN = `http://localhost:3000/`;
  const body = {
    orderCode: Number(String(Date.now()).slice(-6)),
    amount: 10000,
    description: "Thanh toan don hang",
    items: [
      {
        name: "Mì tôm Hảo Hảo ly",
        quantity: 1,
        price: 10000,
      },
    ],
    returnUrl: `${YOUR_DOMAIN}`,
    cancelUrl: `${YOUR_DOMAIN}`,
  };

  try {
    const paymentLinkResponse = await payOS.createPaymentLink(body);

    res.send(paymentLinkResponse);
  } catch (error) {
    console.error(error);
    res.send("Something went error");
  }
});

app.listen(3030, function () {
  console.log(`Server is listening on port 3030`);
});
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body style="display: flex">
    <div style="padding-top: 10px; display: flex; flex-direction: column">
      <div
        style="border: 2px solid blue; border-radius: 10px; overflow: hidden"
      >
        <div id="content-container" style="padding: 10px">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>
        <div id="button-container">
          <button
            type="submit"
            id="create-payment-link-btn"
            style="
              width: 100%;
              background-color: blue;
              color: white;
              border: none;
              padding: 10px;
              font-size: 15px;
            "
          >
            Tạo Link thanh toán
          </button>
        </div>
      </div>
      <div id="embeded-payment-container" style="height: 350px"></div>
    </div>
  </body>
</html>
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
<script src="index.js"></script>
```

/public/index.js

```
/* eslint-disable no-undef */
const buttonContainer = document.getElementById("button-container");
const contentContainer = document.getElementById("content-container");
let isOpen = false;
let config = {
  RETURN_URL: window.location.href,
  ELEMENT_ID: "embeded-payment-container",
  CHECKOUT_URL: "",
  embedded: true,
  onSuccess: (event) => {
    contentContainer.innerHTML = `
        <div style="padding-top: 20px; padding-bottom:20px">
            Thanh toan thanh cong
        </div>
    `;
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: blue;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Quay lại trang thanh toán
        </button>
    `;
  },
};
buttonContainer.addEventListener("click", async (event) => {
  if (isOpen) {
    const { exit } = PayOSCheckout.usePayOS(config);
    exit();
    contentContainer.innerHTML = `
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
    `;
  } else {
    const checkoutUrl = await getPaymentLink();
    config = {
      ...config,
      CHECKOUT_URL: checkoutUrl,
    };
    const { open } = PayOSCheckout.usePayOS(config);
    open();
  }
  isOpen = !isOpen;
  changeButton();
});

const getPaymentLink = async () => {
  const response = await fetch(
    "http://localhost:3030/create-embedded-payment-link",
    {
      method: "POST",
    }
  );
  if (!response.ok) {
    console.log("server doesn't response!");
  }
  const result = await response.json();
  return result.checkoutUrl;
};

const changeButton = () => {
  if (isOpen) {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: gray;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Đóng link thanh toán
        </button>
      `;
  } else {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
                width: 100%;
                background-color: blue;
                color: white;
                border: none;
                padding: 10px;
                font-size: 15px;
            "
            >
            Tạo Link thanh toán
        </button> 
    `;
  }
};
```

## HTML + PHP[​](#html--php "Đường dẫn trực tiếp đến HTML + PHP")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho PHP[​](#cài-đặt-thư-viện-payos-cho-php "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho PHP")

```
composer require payos/payos
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout bằng link cdn[​](#cài-đặt-thư-viện-payos-checkout-bằng-link-cdn "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout bằng link cdn")

```
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
```

### Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán[​](#thêm-nút-tạo-link-thanh-toán-và-thêm-div-nhúng-giao-diện-thanh-toán "Đường dẫn trực tiếp đến Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán")

Thêm 1 nút bấm tạo link thanh toán trên trang xem thông tin đơn hàng để gọi API tạo link thanh toán và 1 div có trường id riêng biệt được sử dụng để nhúng giao diện thanh toán trên trang web

### Khởi tạo config cho hook usePayOS[​](#khởi-tạo-config-cho-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó[​](#thực-hiện-gọi-hook-usepayos-với-config-đã-khởi-tạo-trước-đó "Đường dẫn trực tiếp đến Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó")

usePayOS hook trả về 2 hàm **open()** và **exit()**.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
php -S localhost:3030 --docroot=public
```

### Mã nguồn[​](#mã-nguồn-1 "Đường dẫn trực tiếp đến Mã nguồn")

* checkout.php
* index.html
* index.js

/checkout.php

```
<?php

require_once  '../vendor/autoload.php';
require_once '../payos_secrets.php';

use PayOS\PayOS;

$payOS = new PayOS($payOSClientId, $payOSApiKey, $payOSChecksumKey);

$YOUR_DOMAIN = 'http://localhost:3030/';

$data = [
    "orderCode" => intval(substr(strval(microtime(true) * 10000), -6)),
    "amount" => 2000,
    "description" => "Thanh toán đơn hàng",
    "items" => [
        0 => [
            'name' => 'Mì tôm Hảo Hảo ly',
            'price' => 2000,
            'quantity' => 1
        ]
    ],
    "returnUrl" => $YOUR_DOMAIN,
    "cancelUrl" => $YOUR_DOMAIN
];

$response = $payOS->createPaymentLink($data);
$checkoutUrl = $response['checkoutUrl'];
?>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>PayOS Checkout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
</head>

<body>
    <div class="main-box">
        <div class="checkout">
            <div class="product">
                <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
                <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
                <p><strong>Số lượng:</strong> 1</p>
            </div>
            <button id="create-payment-link-btn">Đóng thanh toán</button>
        </div>
        <div id="embedded-payment-container" style="width:400px;height:400px;max-width:100%;margin:30px auto 0 auto;"></div>
    </div>
    <script>
        let payosInstance = null;
        const config = {
            RETURN_URL: "<?php echo $YOUR_DOMAIN; ?>",
            ELEMENT_ID: "embedded-payment-container",
            CHECKOUT_URL: "<?php echo $checkoutUrl; ?>",
            embedded: true,
            onSuccess: function(event) {
                document.querySelector('.main-box').innerHTML = '<h2>Thanh toán thành công!</h2>';
                document.getElementById('embedded-payment-container').innerHTML = '';
                document.getElementById('create-payment-link-btn').style.display = 'none';
            }
        };
        window.addEventListener('DOMContentLoaded', function() {
            payosInstance = PayOSCheckout.usePayOS(config);
            payosInstance.open();
            document.getElementById('create-payment-link-btn').style.display = 'block';
            document.getElementById('create-payment-link-btn').onclick = function() {
                if (payosInstance) payosInstance.exit();
                document.getElementById('embedded-payment-container').innerHTML = '';
                this.style.display = 'none';
                window.location.href = '/';
            };
        });
    </script>
</body>

</html>
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body style="display: flex">
    <div style="padding-top: 10px; display: flex; flex-direction: column">
      <div
        style="border: 2px solid blue; border-radius: 10px; overflow: hidden"
      >
        <div id="content-container" style="padding: 10px">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>
        <div id="button-container">
          <button
            type="submit"
            id="create-payment-link-btn"
            style="
              width: 100%;
              background-color: blue;
              color: white;
              border: none;
              padding: 10px;
              font-size: 15px;
            "
          >
            Tạo Link thanh toán
          </button>
        </div>
      </div>
      <div id="embeded-payment-container" style="height: 350px"></div>
    </div>
  </body>
</html>
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
<script src="index.js"></script>
```

/public/index.js

```
/* eslint-disable no-undef */
const buttonContainer = document.getElementById("button-container");
const contentContainer = document.getElementById("content-container");
let isOpen = false;
let config = {
  RETURN_URL: window.location.href,
  ELEMENT_ID: "embeded-payment-container",
  CHECKOUT_URL: "",
  embedded: true,
  onSuccess: (event) => {
    contentContainer.innerHTML = `
        <div style="padding-top: 20px; padding-bottom:20px">
            Thanh toan thanh cong
        </div>
    `;
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: blue;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Quay lại trang thanh toán
        </button>
    `;
  },
};
buttonContainer.addEventListener("click", async (event) => {
  if (isOpen) {
    const { exit } = PayOSCheckout.usePayOS(config);
    exit();
    contentContainer.innerHTML = `
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
    `;
  } else {
    const checkoutUrl = await getPaymentLink();
    config = {
      ...config,
      CHECKOUT_URL: checkoutUrl,
    };
    const { open } = PayOSCheckout.usePayOS(config);
    open();
  }
  isOpen = !isOpen;
  changeButton();
});

const getPaymentLink = async () => {
  const response = await fetch(
    "http://localhost:3030/create-embedded-payment-link",
    {
      method: "POST",
    }
  );
  if (!response.ok) {
    console.log("server doesn't response!");
  }
  const result = await response.json();
  return result.checkoutUrl;
};

const changeButton = () => {
  if (isOpen) {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: gray;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Đóng link thanh toán
        </button>
      `;
  } else {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
                width: 100%;
                background-color: blue;
                color: white;
                border: none;
                padding: 10px;
                font-size: 15px;
            "
            >
            Tạo Link thanh toán
        </button> 
    `;
  }
};
```

## HTML + Python[​](#html--python "Đường dẫn trực tiếp đến HTML + Python")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Python[​](#cài-đặt-thư-viện-payos-cho-python "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Python")

```
pip install payos
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout bằng link cdn[​](#cài-đặt-thư-viện-payos-checkout-bằng-link-cdn "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout bằng link cdn")

```
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
```

### Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán[​](#thêm-nút-tạo-link-thanh-toán-và-thêm-div-nhúng-giao-diện-thanh-toán "Đường dẫn trực tiếp đến Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán")

Thêm 1 nút bấm tạo link thanh toán trên trang xem thông tin đơn hàng để gọi API tạo link thanh toán và 1 div có trường id riêng biệt được sử dụng để nhúng giao diện thanh toán trên trang web

### Khởi tạo config cho hook usePayOS[​](#khởi-tạo-config-cho-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó[​](#thực-hiện-gọi-hook-usepayos-với-config-đã-khởi-tạo-trước-đó "Đường dẫn trực tiếp đến Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó")

usePayOS hook trả về 2 hàm **open()** và **exit()**.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
flask run --port=3030
```

### Mã nguồn[​](#mã-nguồn-2 "Đường dẫn trực tiếp đến Mã nguồn")

* server.py
* index.html
* index.js

/server.py

```
"""
server.py
PayOS Sample.
Python 3.6 or newer required.
"""

import time

from flask import Flask, send_from_directory
from payos import ItemData, PaymentData, PayOS

# Keep your PayOS key protected by including it by an environment variable
client_id = "YOUR_CLIENT_ID"
api_key = "YOUR_API_KEY"
checksum_key = "YOUR_CHECKSUM_KEY"

payos = PayOS(client_id, api_key, checksum_key)

app = Flask(__name__, static_url_path="", static_folder="public")

YOUR_DOMAIN = "http://localhost:3030/"


@app.route("/")
def index():
    return send_from_directory("public", "index.html")


@app.route("/create-embedded-payment-link", methods=["POST"])
def create_payment_link():
    try:
        item = ItemData(name="Mì tôm hảo hảo ly", quantity=1, price=2000)
        payment_data = PaymentData(
            orderCode=int(time.time()),
            amount=2000,
            description="Thanh toan don hang",
            items=[item],
            cancelUrl=YOUR_DOMAIN,
            returnUrl=YOUR_DOMAIN,
        )
        payment_link_response = payos.createPaymentLink(payment_data)
    except Exception as e:
        return str(e)

    return payment_link_response.to_json()


if __name__ == "__main__":
    app.run(port=3030)
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body style="display: flex">
    <div style="padding-top: 10px; display: flex; flex-direction: column">
      <div
        style="border: 2px solid blue; border-radius: 10px; overflow: hidden"
      >
        <div id="content-container" style="padding: 10px">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>
        <div id="button-container">
          <button
            type="submit"
            id="create-payment-link-btn"
            style="
              width: 100%;
              background-color: blue;
              color: white;
              border: none;
              padding: 10px;
              font-size: 15px;
            "
          >
            Tạo Link thanh toán
          </button>
        </div>
      </div>
      <div id="embeded-payment-container" style="height: 350px"></div>
    </div>
  </body>
</html>
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
<script src="index.js"></script>
```

/public/index.js

```
/* eslint-disable no-undef */
const buttonContainer = document.getElementById("button-container");
const contentContainer = document.getElementById("content-container");
let isOpen = false;
let config = {
  RETURN_URL: window.location.href,
  ELEMENT_ID: "embeded-payment-container",
  CHECKOUT_URL: "",
  embedded: true,
  onSuccess: (event) => {
    contentContainer.innerHTML = `
        <div style="padding-top: 20px; padding-bottom:20px">
            Thanh toan thanh cong
        </div>
    `;
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: blue;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Quay lại trang thanh toán
        </button>
    `;
  },
};
buttonContainer.addEventListener("click", async (event) => {
  if (isOpen) {
    const { exit } = PayOSCheckout.usePayOS(config);
    exit();
    contentContainer.innerHTML = `
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
    `;
  } else {
    const checkoutUrl = await getPaymentLink();
    config = {
      ...config,
      CHECKOUT_URL: checkoutUrl,
    };
    const { open } = PayOSCheckout.usePayOS(config);
    open();
  }
  isOpen = !isOpen;
  changeButton();
});

const getPaymentLink = async () => {
  const response = await fetch(
    "http://localhost:3030/create-embedded-payment-link",
    {
      method: "POST",
    }
  );
  if (!response.ok) {
    console.log("server doesn't response!");
  }
  const result = await response.json();
  return result.checkoutUrl;
};

const changeButton = () => {
  if (isOpen) {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: gray;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Đóng link thanh toán
        </button>
      `;
  } else {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
                width: 100%;
                background-color: blue;
                color: white;
                border: none;
                padding: 10px;
                font-size: 15px;
            "
            >
            Tạo Link thanh toán
        </button> 
    `;
  }
};
```

## HTML + Go[​](#html--go "Đường dẫn trực tiếp đến HTML + Go")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Go[​](#cài-đặt-thư-viện-payos-cho-go "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Go")

```
go get github.com/payOSHQ/payos-lib-golang
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout bằng link cdn[​](#cài-đặt-thư-viện-payos-checkout-bằng-link-cdn "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout bằng link cdn")

```
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
```

### Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán[​](#thêm-nút-tạo-link-thanh-toán-và-thêm-div-nhúng-giao-diện-thanh-toán "Đường dẫn trực tiếp đến Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán")

Thêm 1 nút bấm tạo link thanh toán trên trang xem thông tin đơn hàng để gọi API tạo link thanh toán và 1 div có trường id riêng biệt được sử dụng để nhúng giao diện thanh toán trên trang web

### Khởi tạo config cho hook usePayOS[​](#khởi-tạo-config-cho-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó[​](#thực-hiện-gọi-hook-usepayos-với-config-đã-khởi-tạo-trước-đó "Đường dẫn trực tiếp đến Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó")

usePayOS hook trả về 2 hàm **open()** và **exit()**.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
go run server.go
```

### Mã nguồn[​](#mã-nguồn-3 "Đường dẫn trực tiếp đến Mã nguồn")

* server.go
* index.html
* index.js

/server.go

```
package main

import (
	"encoding/json"
	"log"
	"net/http"
	"time"

	"github.com/payOSHQ/payos-lib-golang"
)

func main() {
	// Keep your PayOS key protected by including it by an env variable
	const clientId = "YOUR_CLIENT_ID"
	const apiKey = "YOUR_API_KEY"
	const checksumKey = "YOUR_CHECKSUM_KEY"

	payos.Key(clientId, apiKey, checksumKey)

	http.Handle("/", http.FileServer(http.Dir("public")))
	http.HandleFunc("/create-embedded-payment-link", createPaymentLink)
	addr := "localhost:3030"
	log.Printf("Listening on %s", addr)
	log.Fatal(http.ListenAndServe(addr, nil))
}

func createPaymentLink(w http.ResponseWriter, r *http.Request) {
	domain := "http://localhost:3030/"
	paymentLinkRequest := payos.CheckoutRequestType{
		OrderCode:   time.Now().UnixNano() / int64(time.Millisecond),
		Amount:      2000,
		Description: "Thanh toan don hang",
		Items: []payos.Item{{
			Name:     "Mỳ tôm Hảo Hảo",
			Quantity: 1,
			Price:    2000,
		}},
		CancelUrl: domain,
		ReturnUrl: domain,
	}

	paymentLinkResponse, err := payos.CreatePaymentLink(paymentLinkRequest)

	if err != nil {
		log.Printf("Create payment link failed: %v", err)
	}

	// Return paymentLinkResponse as JSON instead of redirect
	w.Header().Set("Content-Type", "application/json")
	if err := json.NewEncoder(w).Encode(paymentLinkResponse); err != nil {
		log.Printf("Failed to encode response: %v", err)
	}
}
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body style="display: flex">
    <div style="padding-top: 10px; display: flex; flex-direction: column">
      <div
        style="border: 2px solid blue; border-radius: 10px; overflow: hidden"
      >
        <div id="content-container" style="padding: 10px">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>
        <div id="button-container">
          <button
            type="submit"
            id="create-payment-link-btn"
            style="
              width: 100%;
              background-color: blue;
              color: white;
              border: none;
              padding: 10px;
              font-size: 15px;
            "
          >
            Tạo Link thanh toán
          </button>
        </div>
      </div>
      <div id="embeded-payment-container" style="height: 350px"></div>
    </div>
  </body>
</html>
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
<script src="index.js"></script>
```

/public/index.js

```
/* eslint-disable no-undef */
const buttonContainer = document.getElementById("button-container");
const contentContainer = document.getElementById("content-container");
let isOpen = false;
let config = {
  RETURN_URL: window.location.href,
  ELEMENT_ID: "embeded-payment-container",
  CHECKOUT_URL: "",
  embedded: true,
  onSuccess: (event) => {
    contentContainer.innerHTML = `
        <div style="padding-top: 20px; padding-bottom:20px">
            Thanh toan thanh cong
        </div>
    `;
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: blue;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Quay lại trang thanh toán
        </button>
    `;
  },
};
buttonContainer.addEventListener("click", async (event) => {
  if (isOpen) {
    const { exit } = PayOSCheckout.usePayOS(config);
    exit();
    contentContainer.innerHTML = `
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
    `;
  } else {
    const checkoutUrl = await getPaymentLink();
    config = {
      ...config,
      CHECKOUT_URL: checkoutUrl,
    };
    const { open } = PayOSCheckout.usePayOS(config);
    open();
  }
  isOpen = !isOpen;
  changeButton();
});

const getPaymentLink = async () => {
  const response = await fetch(
    "http://localhost:3030/create-embedded-payment-link",
    {
      method: "POST",
    }
  );
  if (!response.ok) {
    console.log("server doesn't response!");
  }
  const result = await response.json();
  return result.checkoutUrl;
};

const changeButton = () => {
  if (isOpen) {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: gray;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Đóng link thanh toán
        </button>
      `;
  } else {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
                width: 100%;
                background-color: blue;
                color: white;
                border: none;
                padding: 10px;
                font-size: 15px;
            "
            >
            Tạo Link thanh toán
        </button> 
    `;
  }
};
```

## HTML + .NET[​](#html--net "Đường dẫn trực tiếp đến HTML + .NET")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho .NET[​](#cài-đặt-thư-viện-payos-cho-net "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho .NET")

<!-- -->

* dotnet
* NuGet

```
dotnet add package payOS
```

```
Install-Package payOS
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout bằng link cdn[​](#cài-đặt-thư-viện-payos-checkout-bằng-link-cdn "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout bằng link cdn")

```
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
```

### Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán[​](#thêm-nút-tạo-link-thanh-toán-và-thêm-div-nhúng-giao-diện-thanh-toán "Đường dẫn trực tiếp đến Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán")

Thêm 1 nút bấm tạo link thanh toán trên trang xem thông tin đơn hàng để gọi API tạo link thanh toán và 1 div có trường id riêng biệt được sử dụng để nhúng giao diện thanh toán trên trang web

### Khởi tạo config cho hook usePayOS[​](#khởi-tạo-config-cho-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó[​](#thực-hiện-gọi-hook-usepayos-với-config-đã-khởi-tạo-trước-đó "Đường dẫn trực tiếp đến Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó")

usePayOS hook trả về 2 hàm **open()** và **exit()**.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
dotnet run
```

### Mã nguồn[​](#mã-nguồn-4 "Đường dẫn trực tiếp đến Mã nguồn")

* Server.cs
* index.html
* index.js

/Server.cs

```
using Microsoft.AspNetCore;
using Microsoft.AspNetCore.Mvc;
using Net.payOS;
using Net.payOS.Types;

namespace server.Controllers
{
    public class Program
    {
        public static void Main(string[] args)
        {
            WebHost.CreateDefaultBuilder(args)
              .UseUrls("http://localhost:3030/")
              .UseWebRoot("public")
              .UseStartup<Startup>()
              .Build()
              .Run();
        }
    }

    public class Startup
    {
        public void ConfigureServices(IServiceCollection services)
        {
            services.AddControllers();
        }
        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
        {
            if (env.IsDevelopment()) app.UseDeveloperExceptionPage();
            app.UseRouting();
            app.UseStaticFiles();
            app.UseEndpoints(endpoints =>
            {
                endpoints.MapControllers();
                endpoints.MapGet("/", context =>
                {
                    context.Response.Redirect("/index.html");
                    return Task.CompletedTask;
                });
            });
        }
    }

    [Route("create-embedded-payment-link")]
    [ApiController]
    public class CheckoutApiController : Controller
    {
        [HttpPost]
        public async Task<IActionResult> Create()
        {
            // Keep your PayOS key protected by including it by an env variable
            var clientId = "YOUR_CLIENT_ID";
            var apiKey = "YOUR_API_KEY";
            var checksumKey = "YOUR_CHECKSUM_KEY";

            var payOS = new PayOS(clientId, apiKey, checksumKey);

            var domain = "http://localhost:3030/";

            var paymentLinkRequest = new PaymentData(
                orderCode: int.Parse(DateTimeOffset.Now.ToString("ffffff")),
                amount: 2000,
                description: "Thanh toan don hang",
                items: [new("Mì tôm hảo hảo ly", 1, 2000)],
                returnUrl: domain,
                cancelUrl: domain
            );
            var response = await payOS.createPaymentLink(paymentLinkRequest);

            return json(response);
        }
    }
}
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body style="display: flex">
    <div style="padding-top: 10px; display: flex; flex-direction: column">
      <div
        style="border: 2px solid blue; border-radius: 10px; overflow: hidden"
      >
        <div id="content-container" style="padding: 10px">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>
        <div id="button-container">
          <button
            type="submit"
            id="create-payment-link-btn"
            style="
              width: 100%;
              background-color: blue;
              color: white;
              border: none;
              padding: 10px;
              font-size: 15px;
            "
          >
            Tạo Link thanh toán
          </button>
        </div>
      </div>
      <div id="embeded-payment-container" style="height: 350px"></div>
    </div>
  </body>
</html>
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
<script src="index.js"></script>
```

/public/index.js

```
/* eslint-disable no-undef */
const buttonContainer = document.getElementById("button-container");
const contentContainer = document.getElementById("content-container");
let isOpen = false;
let config = {
  RETURN_URL: window.location.href,
  ELEMENT_ID: "embeded-payment-container",
  CHECKOUT_URL: "",
  embedded: true,
  onSuccess: (event) => {
    contentContainer.innerHTML = `
        <div style="padding-top: 20px; padding-bottom:20px">
            Thanh toan thanh cong
        </div>
    `;
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: blue;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Quay lại trang thanh toán
        </button>
    `;
  },
};
buttonContainer.addEventListener("click", async (event) => {
  if (isOpen) {
    const { exit } = PayOSCheckout.usePayOS(config);
    exit();
    contentContainer.innerHTML = `
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
    `;
  } else {
    const checkoutUrl = await getPaymentLink();
    config = {
      ...config,
      CHECKOUT_URL: checkoutUrl,
    };
    const { open } = PayOSCheckout.usePayOS(config);
    open();
  }
  isOpen = !isOpen;
  changeButton();
});

const getPaymentLink = async () => {
  const response = await fetch(
    "http://localhost:3030/create-embedded-payment-link",
    {
      method: "POST",
    }
  );
  if (!response.ok) {
    console.log("server doesn't response!");
  }
  const result = await response.json();
  return result.checkoutUrl;
};

const changeButton = () => {
  if (isOpen) {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: gray;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Đóng link thanh toán
        </button>
      `;
  } else {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
                width: 100%;
                background-color: blue;
                color: white;
                border: none;
                padding: 10px;
                font-size: 15px;
            "
            >
            Tạo Link thanh toán
        </button> 
    `;
  }
};
```

## HTML + Java[​](#html--java "Đường dẫn trực tiếp đến HTML + Java")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Java[​](#cài-đặt-thư-viện-payos-cho-java "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Java")

<!-- -->

* Maven
* Gradle

Thêm đoạn code sau vào POM và thay VERSION bằng phiên bản bạn muốn sử dụng.

```
<dependency>
  <groupId>vn.payos</groupId>
  <artifactId>payos-java</artifactId>
  <version>{VERSION}</version>
</dependency>
```

Thêm đoạn code sau vào build.gradle và thay VERSION bằng phiên bản bạn muốn sử dụng.

```
implementation 'vn.payos:payos-java:{VERSION}'
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đ ến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout bằng link cdn[​](#cài-đặt-thư-viện-payos-checkout-bằng-link-cdn "Đư ờng dẫn trực tiếp đến Cài đặt thư viện payos-checkout bằng link cdn")

```
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
```

### Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán[​](#thêm-nút-tạo-link-thanh-toán-và-thêm-div-nhúng-giao-diện-thanh-toán "Đường dẫn trực tiếp đến Thêm nút tạo link thanh toán và thêm div nhúng giao diện thanh toán")

Thêm 1 nút bấm tạo link thanh toán trên trang xem thông tin đơn hàng để gọi API tạo link thanh toán và 1 div có trường id riêng biệt được sử dụng để nhúng giao diện thanh toán trên trang web

### Khởi tạo config cho hook usePayOS[​](#khởi-tạo-config-cho-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó[​](#thực-hiện-gọi-hook-usepayos-với-config-đã-khởi-tạo-trước-đó "Đường dẫn trực tiếp đến Thực hiện gọi hook usePayOS với config đã khởi tạo trước đó")

usePayOS hook trả về 2 hàm **open()** và **exit()**.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Chạy server của bạn và truy cập vào [`http://localhost:3030`](http://localhost:3030) để bắt đầu tạo link thanh toán.

```
java -cp .\target\payos-payment-1.0-SNAPSHOT-jar-with-dependencies.jar vn.payos.sample.Server
```

### Mã nguồn[​](#mã-nguồn-5 "Đường dẫn trực tiếp đến Mã nguồn")

* Server.java
* pom.xml
* index.html
* index.js

/Server.java

```
package vn.payos.sample;

import static spark.Spark.post;
import static spark.Spark.port;
import static spark.Spark.staticFiles;

import java.nio.file.Paths;

import vn.payos.PayOS;
import vn.payos.type.CheckoutResponseData;
import vn.payos.type.ItemData;
import vn.payos.type.PaymentData;

public class Server {
    public static void main(String[] args) {
        port(3000);
        String clientId = "YOUR_CLIENT_ID";
        String apiKey = "YOUR_API_KEY";
        String checksumKey = "YOUR_CHECKSUM_KEY";

        final PayOS payOS = new PayOS(clientId, apiKey, checksumKey);

        staticFiles.externalLocation(
                Paths.get("public").toAbsolutePath().toString());

        post("/create-embedded-payment-link", (request, response) -> {
            String domain = "http://localhost:3000/";
            Long orderCode = System.currentTimeMillis() / 1000;
            ItemData itemData = ItemData
                    .builder()
                    .name("Mỳ tôm Hảo Hảo ly")
                    .quantity(1)
                    .price(2000)
                    .build();

            PaymentData paymentData = PaymentData
                    .builder()
                    .orderCode(orderCode)
                    .amount(2000)
                    .description("Thanh toán đơn hàng")
                    .returnUrl(domain)
                    .cancelUrl(domain)
                    .item(itemData)
                    .build();

            CheckoutResponseData result = payOS.createPaymentLink(paymentData);
            response.type("application/json");
            return new com.google.gson.Gson().toJson(result);
        });
    }
}
```

/pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>vn.payos.sample</groupId>
  <artifactId>payos-payment</artifactId>
  <version>1.0-SNAPSHOT</version>

  <name>sample</name>
  <!-- FIXME change it to the project's website -->
  <url>http://www.example.com</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
  </properties>

  <dependencies>
    <dependency>
      <groupId>com.sparkjava</groupId>
      <artifactId>spark-core</artifactId>
      <version>2.9.4</version>
    </dependency>
    <dependency>
      <groupId>vn.payos</groupId>
      <artifactId>payos-java</artifactId>
      <version>1.0.1</version>
    </dependency>
  </dependencies>

  <build>
    <pluginManagement><!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) -->
      <plugins>
        <!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle -->
        <plugin>
          <artifactId>maven-clean-plugin</artifactId>
          <version>3.1.0</version>
        </plugin>
        <!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging -->
        <plugin>
          <artifactId>maven-resources-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>3.8.0</version>
        </plugin>
        <plugin>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.22.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-jar-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-install-plugin</artifactId>
          <version>2.5.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.8.2</version>
        </plugin>
        <!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle -->
        <plugin>
          <artifactId>maven-site-plugin</artifactId>
          <version>3.7.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-project-info-reports-plugin</artifactId>
          <version>3.0.0</version>
        </plugin>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
            <execution>
                <phase>package</phase>
                <goals>
                <goal>single</goal>
                </goals>
            </execution>
            </executions>
            <configuration>
            <descriptorRefs>
                <!-- This tells Maven to include all dependencies -->
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
            <archive>
                <manifest>
                <mainClass>vn.payos.sample.Server</mainClass>
                </manifest>
            </archive>
            </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
</project>
```

/public/index.html

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tạo Link thanh toán</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body style="display: flex">
    <div style="padding-top: 10px; display: flex; flex-direction: column">
      <div
        style="border: 2px solid blue; border-radius: 10px; overflow: hidden"
      >
        <div id="content-container" style="padding: 10px">
          <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
          <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
          <p><strong>Số lượng:</strong> 1</p>
        </div>
        <div id="button-container">
          <button
            type="submit"
            id="create-payment-link-btn"
            style="
              width: 100%;
              background-color: blue;
              color: white;
              border: none;
              padding: 10px;
              font-size: 15px;
            "
          >
            Tạo Link thanh toán
          </button>
        </div>
      </div>
      <div id="embeded-payment-container" style="height: 350px"></div>
    </div>
  </body>
</html>
<script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
<script src="index.js"></script>
```

/public/index.js

```
/* eslint-disable no-undef */
const buttonContainer = document.getElementById("button-container");
const contentContainer = document.getElementById("content-container");
let isOpen = false;
let config = {
  RETURN_URL: window.location.href,
  ELEMENT_ID: "embeded-payment-container",
  CHECKOUT_URL: "",
  embedded: true,
  onSuccess: (event) => {
    contentContainer.innerHTML = `
        <div style="padding-top: 20px; padding-bottom:20px">
            Thanh toan thanh cong
        </div>
    `;
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: blue;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Quay lại trang thanh toán
        </button>
    `;
  },
};
buttonContainer.addEventListener("click", async (event) => {
  if (isOpen) {
    const { exit } = PayOSCheckout.usePayOS(config);
    exit();
    contentContainer.innerHTML = `
        <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
        <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
        <p><strong>Số lượng:</strong> 1</p>
    `;
  } else {
    const checkoutUrl = await getPaymentLink();
    config = {
      ...config,
      CHECKOUT_URL: checkoutUrl,
    };
    const { open } = PayOSCheckout.usePayOS(config);
    open();
  }
  isOpen = !isOpen;
  changeButton();
});

const getPaymentLink = async () => {
  const response = await fetch(
    "http://localhost:3030/create-embedded-payment-link",
    {
      method: "POST",
    }
  );
  if (!response.ok) {
    console.log("server doesn't response!");
  }
  const result = await response.json();
  return result.checkoutUrl;
};

const changeButton = () => {
  if (isOpen) {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
            width: 100%;
            background-color: gray;
            color: white;
            border: none;
            padding: 10px;
            font-size: 15px;
            "
        >
            Đóng link thanh toán
        </button>
      `;
  } else {
    buttonContainer.innerHTML = `
        <button
            type="submit"
            id="create-payment-link-btn"
            style="
                width: 100%;
                background-color: blue;
                color: white;
                border: none;
                padding: 10px;
                font-size: 15px;
            "
            >
            Tạo Link thanh toán
        </button> 
    `;
  }
};
```

## React + Node.js[​](#react--nodejs "Đường dẫn trực tiếp đến React + Node.js")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho NodeJS[​](#cài-đặt-thư-viện-payos-cho-nodejs "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho NodeJS")

```
npm install @payos/node
# hoặc
yarn add @payos/node
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout và import usePayOS[​](#cài-đặt-thư-viện-payos-checkout-và-import-usepayos "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout và import usePayOS")

```
npm install @payos/payos-checkout
# hoặc
yarn add @payos/payos-checkout
```

### Khởi tạo config cho việc gọi hook usePayOS[​](#khởi-tạo-config-cho-việc-gọi-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho việc gọi hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán[​](#sử-dụng-thư-viện-payos-checkout-để-thực-hiện-việc-nhúng-link-thanh-toán "Đường dẫn trực tiếp đến Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán")

Gọi hook usePayOS trong thư viện PayOSCheckout để sử dụng 2 phương thức open() và exit() để lần lượt nhúng và gỡ bỏ giao diện thanh toán trên trang web.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm những trường sau vào file `package.json`:

```
"proxy": "http://localhost:3030",
"scripts": {
    # another scripts
    "start-client": "react-scripts start",
    "start-server": "nodemon server.js",
    "start": "concurrently \"npm run start-client\" \"npm run start-server\""
},
```

Chạy server và client của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
npm run start
```

### Mã nguồn[​](#mã-nguồn-6 "Đường dẫn trực tiếp đến Mã nguồn")

* server.js
* App.js

/server.js

```
const express = require("express");
const dotenv = require("dotenv");
const cors = require("cors");
const PayOS = require("@payos/node");

const app = express();
dotenv.config();
const payOS = new PayOS(
  process.env.PAYOS_CLIENT_ID,
  process.env.PAYOS_API_KEY,
  process.env.PAYOS_CHECKSUM_KEY
);

app.use(cors());
app.use(express.json());
app.use(express.urlencoded({ extended: false }));

app.post("/create-embedded-payment-link", async (req, res) => {
  const YOUR_DOMAIN = `http://localhost:3000/`;
  const body = {
    orderCode: Number(String(Date.now()).slice(-6)),
    amount: 10000,
    description: "Thanh toan don hang",
    items: [
      {
        name: "Mì tôm Hảo Hảo ly",
        quantity: 1,
        price: 10000,
      },
    ],
    returnUrl: `${YOUR_DOMAIN}`,
    cancelUrl: `${YOUR_DOMAIN}`,
  };

  try {
    const paymentLinkResponse = await payOS.createPaymentLink(body);

    res.send(paymentLinkResponse);
  } catch (error) {
    console.error(error);
    res.send("Something went error");
  }
});

app.listen(3030, function () {
  console.log(`Server is listening on port 3030`);
});
```

/client/src/App.js

```
import React, { useState, useEffect } from "react";
import { usePayOS } from "@payos/payos-checkout";
import "./App.css";

const ProductDisplay = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [message, setMessage] = useState("");
  const [isCreatingLink, setIsCreatingLink] = useState(false);

  const [payOSConfig, setPayOSConfig] = useState({
    RETURN_URL: window.location.href, // required
    ELEMENT_ID: "embedded-payment-container", // required
    CHECKOUT_URL: null, // required
    embedded: true, // Nếu dùng giao diện nhúng
    onSuccess: (event) => {
      //TODO: Hành động sau khi người dùng thanh toán đơn hàng thành công
      setIsOpen(false);
      setMessage("Thanh toan thanh cong");
    },
  });

  const { open, exit } = usePayOS(payOSConfig);

  const handleGetPaymentLink = async () => {
    setIsCreatingLink(true);
    exit();
    const response = await fetch(
      "http://localhost:3030/create-embedded-payment-link",
      {
        method: "POST",
      }
    );
    if (!response.ok) {
      console.log("Server doesn't response");
    }

    const result = await response.json();
    setPayOSConfig((oldConfig) => ({
      ...oldConfig,
      CHECKOUT_URL: result.checkoutUrl,
    }));

    setIsOpen(true);
    setIsCreatingLink(false);
  };

  useEffect(() => {
    if (payOSConfig.CHECKOUT_URL != null) {
      open();
    }
  }, [payOSConfig]);
  return message ? (
    <Message message={message} />
  ) : (
    <div className="main-box">
      <div>
        <div className="checkout">
          <div className="product">
            <p>
              <strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly
            </p>
            <p>
              <strong>Giá tiền:</strong> 2000 VNĐ
            </p>
            <p>
              <strong>Số lượng:</strong> 1
            </p>
          </div>
          <div className="flex">
            {!isOpen ? (
              <div>
                {isCreatingLink ? (
                  <div
                    style={{
                      textAlign: "center",
                      padding: "10px",
                      fontWeight: "600",
                    }}
                  >
                    Creating Link...
                  </div>
                ) : (
                  <button
                    id="create-payment-link-btn"
                    onClick={(event) => {
                      event.preventDefault();
                      handleGetPaymentLink();
                    }}
                  >
                    Tạo Link thanh toán Embedded
                  </button>
                )}
              </div>
            ) : (
              <button
                style={{
                  backgroundColor: "gray",
                  color: "white",
                  width: "100%",
                  paddingTop: "10px",
                  paddingBottom: "10px",
                  fontSize: "14px",
                  marginTop: "5px",
                }}
                onClick={(event) => {
                  event.preventDefault();
                  setIsOpen(false);
                  exit();
                }}
              >
                Đóng Link
              </button>
            )}
          </div>
        </div>
        {isOpen && (
          <div style={{ maxWidth: "400px", padding: "2px" }}>
            Sau khi thực hiện thanh toán thành công, vui lòng đợi từ 5 - 10s để
            hệ thống tự động cập nhật.
          </div>
        )}
        <div
          id="embedded-payment-container"
          style={{
            height: "350px",
          }}
        ></div>
      </div>
    </div>
  );
};

const Message = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div class="product" style={{ textAlign: "center", fontWeight: "500" }}>
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  return <ProductDisplay />;
}
```

## React + PHP[​](#react--php "Đường dẫn trực tiếp đến React + PHP")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho PHP[​](#cài-đặt-thư-viện-payos-cho-php "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho PHP")

```
composer require payos/payos
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout và import usePayOS[​](#cài-đặt-thư-viện-payos-checkout-và-import-usepayos "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout và import usePayOS")

```
npm install @payos/payos-checkout
# hoặc
yarn add @payos/payos-checkout
```

### Khởi tạo config cho việc gọi hook usePayOS[​](#khởi-tạo-config-cho-việc-gọi-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho việc gọi hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán[​](#sử-dụng-thư-viện-payos-checkout-để-thực-hiện-việc-nhúng-link-thanh-toán "Đường dẫn trực tiếp đến Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán")

Gọi hook usePayOS trong thư viện PayOSCheckout để sử dụng 2 phương thức open() và exit() để lần lượt nhúng và gỡ bỏ giao diện thanh toán trên trang web.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
# server side
php -S localhost:3030 --docroot=public

# client side
npm start
```

### Mã nguồn[​](#mã-nguồn-7 "Đường dẫn trực tiếp đến Mã nguồn")

* checkout.php
* App.js

/checkout.php

```
<?php

require_once  '../vendor/autoload.php';
require_once '../payos_secrets.php';

use PayOS\PayOS;

$payOS = new PayOS($payOSClientId, $payOSApiKey, $payOSChecksumKey);

$YOUR_DOMAIN = 'http://localhost:3030/';

$data = [
    "orderCode" => intval(substr(strval(microtime(true) * 10000), -6)),
    "amount" => 2000,
    "description" => "Thanh toán đơn hàng",
    "items" => [
        0 => [
            'name' => 'Mì tôm Hảo Hảo ly',
            'price' => 2000,
            'quantity' => 1
        ]
    ],
    "returnUrl" => $YOUR_DOMAIN,
    "cancelUrl" => $YOUR_DOMAIN
];

$response = $payOS->createPaymentLink($data);
$checkoutUrl = $response['checkoutUrl'];
?>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>PayOS Checkout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.payos.vn/payos-checkout/v1/stable/payos-initialize.js"></script>
</head>

<body>
    <div class="main-box">
        <div class="checkout">
            <div class="product">
                <p><strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly</p>
                <p><strong>Giá tiền:</strong> 2000 VNĐ</p>
                <p><strong>Số lượng:</strong> 1</p>
            </div>
            <button id="create-payment-link-btn">Đóng thanh toán</button>
        </div>
        <div id="embedded-payment-container" style="width:400px;height:400px;max-width:100%;margin:30px auto 0 auto;"></div>
    </div>
    <script>
        let payosInstance = null;
        const config = {
            RETURN_URL: "<?php echo $YOUR_DOMAIN; ?>",
            ELEMENT_ID: "embedded-payment-container",
            CHECKOUT_URL: "<?php echo $checkoutUrl; ?>",
            embedded: true,
            onSuccess: function(event) {
                document.querySelector('.main-box').innerHTML = '<h2>Thanh toán thành công!</h2>';
                document.getElementById('embedded-payment-container').innerHTML = '';
                document.getElementById('create-payment-link-btn').style.display = 'none';
            }
        };
        window.addEventListener('DOMContentLoaded', function() {
            payosInstance = PayOSCheckout.usePayOS(config);
            payosInstance.open();
            document.getElementById('create-payment-link-btn').style.display = 'block';
            document.getElementById('create-payment-link-btn').onclick = function() {
                if (payosInstance) payosInstance.exit();
                document.getElementById('embedded-payment-container').innerHTML = '';
                this.style.display = 'none';
                window.location.href = '/';
            };
        });
    </script>
</body>

</html>
```

/client/src/App.js

```
import React, { useState, useEffect } from "react";
import { usePayOS } from "@payos/payos-checkout";
import "./App.css";

const ProductDisplay = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [message, setMessage] = useState("");
  const [isCreatingLink, setIsCreatingLink] = useState(false);

  const [payOSConfig, setPayOSConfig] = useState({
    RETURN_URL: window.location.href, // required
    ELEMENT_ID: "embedded-payment-container", // required
    CHECKOUT_URL: null, // required
    embedded: true, // Nếu dùng giao diện nhúng
    onSuccess: (event) => {
      //TODO: Hành động sau khi người dùng thanh toán đơn hàng thành công
      setIsOpen(false);
      setMessage("Thanh toan thanh cong");
    },
  });

  const { open, exit } = usePayOS(payOSConfig);

  const handleGetPaymentLink = async () => {
    setIsCreatingLink(true);
    exit();
    const response = await fetch(
      "http://localhost:3030/create-embedded-payment-link",
      {
        method: "POST",
      }
    );
    if (!response.ok) {
      console.log("Server doesn't response");
    }

    const result = await response.json();
    setPayOSConfig((oldConfig) => ({
      ...oldConfig,
      CHECKOUT_URL: result.checkoutUrl,
    }));

    setIsOpen(true);
    setIsCreatingLink(false);
  };

  useEffect(() => {
    if (payOSConfig.CHECKOUT_URL != null) {
      open();
    }
  }, [payOSConfig]);
  return message ? (
    <Message message={message} />
  ) : (
    <div className="main-box">
      <div>
        <div className="checkout">
          <div className="product">
            <p>
              <strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly
            </p>
            <p>
              <strong>Giá tiền:</strong> 2000 VNĐ
            </p>
            <p>
              <strong>Số lượng:</strong> 1
            </p>
          </div>
          <div className="flex">
            {!isOpen ? (
              <div>
                {isCreatingLink ? (
                  <div
                    style={{
                      textAlign: "center",
                      padding: "10px",
                      fontWeight: "600",
                    }}
                  >
                    Creating Link...
                  </div>
                ) : (
                  <button
                    id="create-payment-link-btn"
                    onClick={(event) => {
                      event.preventDefault();
                      handleGetPaymentLink();
                    }}
                  >
                    Tạo Link thanh toán Embedded
                  </button>
                )}
              </div>
            ) : (
              <button
                style={{
                  backgroundColor: "gray",
                  color: "white",
                  width: "100%",
                  paddingTop: "10px",
                  paddingBottom: "10px",
                  fontSize: "14px",
                  marginTop: "5px",
                }}
                onClick={(event) => {
                  event.preventDefault();
                  setIsOpen(false);
                  exit();
                }}
              >
                Đóng Link
              </button>
            )}
          </div>
        </div>
        {isOpen && (
          <div style={{ maxWidth: "400px", padding: "2px" }}>
            Sau khi thực hiện thanh toán thành công, vui lòng đợi từ 5 - 10s để
            hệ thống tự động cập nhật.
          </div>
        )}
        <div
          id="embedded-payment-container"
          style={{
            height: "350px",
          }}
        ></div>
      </div>
    </div>
  );
};

const Message = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div class="product" style={{ textAlign: "center", fontWeight: "500" }}>
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  return <ProductDisplay />;
}
```

## React + Python[​](#react--python "Đường dẫn trực tiếp đến React + Python")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Python[​](#cài-đặt-thư-viện-payos-cho-python "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Python")

```
pip install payos
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout và import usePayOS[​](#cài-đặt-thư-viện-payos-checkout-và-import-usepayos "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout và import usePayOS")

```
npm install @payos/payos-checkout
# hoặc
yarn add @payos/payos-checkout
```

### Khởi tạo config cho việc gọi hook usePayOS[​](#khởi-tạo-config-cho-việc-gọi-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho việc gọi hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán[​](#sử-dụng-thư-viện-payos-checkout-để-thực-hiện-việc-nhúng-link-thanh-toán "Đường dẫn trực tiếp đến Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán")

Gọi hook usePayOS trong thư viện PayOSCheckout để sử dụng 2 phương thức open() và exit() để lần lượt nhúng và gỡ bỏ giao diện thanh toán trên trang web.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
# server side
flask run --port=3030

# client side
npm start
```

### Mã nguồn[​](#mã-nguồn-8 "Đường dẫn trực tiếp đến Mã nguồn")

* server.py
* App.js

/server.py

```
"""
server.py
PayOS Sample.
Python 3.6 or newer required.
"""

import time

from flask import Flask, send_from_directory
from payos import ItemData, PaymentData, PayOS

# Keep your PayOS key protected by including it by an environment variable
client_id = "YOUR_CLIENT_ID"
api_key = "YOUR_API_KEY"
checksum_key = "YOUR_CHECKSUM_KEY"

payos = PayOS(client_id, api_key, checksum_key)

app = Flask(__name__, static_url_path="", static_folder="public")

YOUR_DOMAIN = "http://localhost:3030/"


@app.route("/")
def index():
    return send_from_directory("public", "index.html")


@app.route("/create-embedded-payment-link", methods=["POST"])
def create_payment_link():
    try:
        item = ItemData(name="Mì tôm hảo hảo ly", quantity=1, price=2000)
        payment_data = PaymentData(
            orderCode=int(time.time()),
            amount=2000,
            description="Thanh toan don hang",
            items=[item],
            cancelUrl=YOUR_DOMAIN,
            returnUrl=YOUR_DOMAIN,
        )
        payment_link_response = payos.createPaymentLink(payment_data)
    except Exception as e:
        return str(e)

    return payment_link_response.to_json()


if __name__ == "__main__":
    app.run(port=3030)
```

/client/src/App.js

```
import React, { useState, useEffect } from "react";
import { usePayOS } from "@payos/payos-checkout";
import "./App.css";

const ProductDisplay = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [message, setMessage] = useState("");
  const [isCreatingLink, setIsCreatingLink] = useState(false);

  const [payOSConfig, setPayOSConfig] = useState({
    RETURN_URL: window.location.href, // required
    ELEMENT_ID: "embedded-payment-container", // required
    CHECKOUT_URL: null, // required
    embedded: true, // Nếu dùng giao diện nhúng
    onSuccess: (event) => {
      //TODO: Hành động sau khi người dùng thanh toán đơn hàng thành công
      setIsOpen(false);
      setMessage("Thanh toan thanh cong");
    },
  });

  const { open, exit } = usePayOS(payOSConfig);

  const handleGetPaymentLink = async () => {
    setIsCreatingLink(true);
    exit();
    const response = await fetch(
      "http://localhost:3030/create-embedded-payment-link",
      {
        method: "POST",
      }
    );
    if (!response.ok) {
      console.log("Server doesn't response");
    }

    const result = await response.json();
    setPayOSConfig((oldConfig) => ({
      ...oldConfig,
      CHECKOUT_URL: result.checkoutUrl,
    }));

    setIsOpen(true);
    setIsCreatingLink(false);
  };

  useEffect(() => {
    if (payOSConfig.CHECKOUT_URL != null) {
      open();
    }
  }, [payOSConfig]);
  return message ? (
    <Message message={message} />
  ) : (
    <div className="main-box">
      <div>
        <div className="checkout">
          <div className="product">
            <p>
              <strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly
            </p>
            <p>
              <strong>Giá tiền:</strong> 2000 VNĐ
            </p>
            <p>
              <strong>Số lượng:</strong> 1
            </p>
          </div>
          <div className="flex">
            {!isOpen ? (
              <div>
                {isCreatingLink ? (
                  <div
                    style={{
                      textAlign: "center",
                      padding: "10px",
                      fontWeight: "600",
                    }}
                  >
                    Creating Link...
                  </div>
                ) : (
                  <button
                    id="create-payment-link-btn"
                    onClick={(event) => {
                      event.preventDefault();
                      handleGetPaymentLink();
                    }}
                  >
                    Tạo Link thanh toán Embedded
                  </button>
                )}
              </div>
            ) : (
              <button
                style={{
                  backgroundColor: "gray",
                  color: "white",
                  width: "100%",
                  paddingTop: "10px",
                  paddingBottom: "10px",
                  fontSize: "14px",
                  marginTop: "5px",
                }}
                onClick={(event) => {
                  event.preventDefault();
                  setIsOpen(false);
                  exit();
                }}
              >
                Đóng Link
              </button>
            )}
          </div>
        </div>
        {isOpen && (
          <div style={{ maxWidth: "400px", padding: "2px" }}>
            Sau khi thực hiện thanh toán thành công, vui lòng đợi từ 5 - 10s để
            hệ thống tự động cập nhật.
          </div>
        )}
        <div
          id="embedded-payment-container"
          style={{
            height: "350px",
          }}
        ></div>
      </div>
    </div>
  );
};

const Message = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div class="product" style={{ textAlign: "center", fontWeight: "500" }}>
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  return <ProductDisplay />;
}
```

## React + Go[​](#react--go "Đường dẫn trực tiếp đến React + Go")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết l ập Server")

### Cài đặt thư viện payOS cho Go[​](#cài-đặt-thư-viện-payos-cho-go "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Go")

```
go get github.com/payOSHQ/payos-lib-golang
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout và import usePayOS[​](#cài-đặt-thư-viện-payos-checkout-và-import-usepayos "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout và import usePayOS")

```
npm install @payos/payos-checkout
# hoặc
yarn add @payos/payos-checkout
```

### Khởi tạo config cho việc gọi hook usePayOS[​](#khởi-tạo-config-cho-việc-gọi-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho việc gọi hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán[​](#sử-dụng-thư-viện-payos-checkout-để-thực-hiện-việc-nhúng-link-thanh-toán "Đường dẫn trực tiếp đến Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán")

Gọi hook usePayOS trong thư viện PayOSCheckout để sử dụng 2 phương thức open() và exit() để lần lượt nhúng và gỡ bỏ giao diện thanh toán trên trang web.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
# server side
go run server.go

# client side
npm start
```

### Mã nguồn[​](#mã-nguồn-9 "Đường dẫn trực tiếp đến Mã nguồn")

* server.go
* App.js

/server.go

```
package main

import (
	"encoding/json"
	"log"
	"net/http"
	"time"

	"github.com/payOSHQ/payos-lib-golang"
)

func main() {
	// Keep your PayOS key protected by including it by an env variable
	const clientId = "YOUR_CLIENT_ID"
	const apiKey = "YOUR_API_KEY"
	const checksumKey = "YOUR_CHECKSUM_KEY"

	payos.Key(clientId, apiKey, checksumKey)

	http.Handle("/", http.FileServer(http.Dir("public")))
	http.HandleFunc("/create-embedded-payment-link", createPaymentLink)
	addr := "localhost:3030"
	log.Printf("Listening on %s", addr)
	log.Fatal(http.ListenAndServe(addr, nil))
}

func createPaymentLink(w http.ResponseWriter, r *http.Request) {
	domain := "http://localhost:3030/"
	paymentLinkRequest := payos.CheckoutRequestType{
		OrderCode:   time.Now().UnixNano() / int64(time.Millisecond),
		Amount:      2000,
		Description: "Thanh toan don hang",
		Items: []payos.Item{{
			Name:     "Mỳ tôm Hảo Hảo",
			Quantity: 1,
			Price:    2000,
		}},
		CancelUrl: domain,
		ReturnUrl: domain,
	}

	paymentLinkResponse, err := payos.CreatePaymentLink(paymentLinkRequest)

	if err != nil {
		log.Printf("Create payment link failed: %v", err)
	}

	// Return paymentLinkResponse as JSON instead of redirect
	w.Header().Set("Content-Type", "application/json")
	if err := json.NewEncoder(w).Encode(paymentLinkResponse); err != nil {
		log.Printf("Failed to encode response: %v", err)
	}
}
```

/client/src/App.js

```
import React, { useState, useEffect } from "react";
import { usePayOS } from "@payos/payos-checkout";
import "./App.css";

const ProductDisplay = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [message, setMessage] = useState("");
  const [isCreatingLink, setIsCreatingLink] = useState(false);

  const [payOSConfig, setPayOSConfig] = useState({
    RETURN_URL: window.location.href, // required
    ELEMENT_ID: "embedded-payment-container", // required
    CHECKOUT_URL: null, // required
    embedded: true, // Nếu dùng giao diện nhúng
    onSuccess: (event) => {
      //TODO: Hành động sau khi người dùng thanh toán đơn hàng thành công
      setIsOpen(false);
      setMessage("Thanh toan thanh cong");
    },
  });

  const { open, exit } = usePayOS(payOSConfig);

  const handleGetPaymentLink = async () => {
    setIsCreatingLink(true);
    exit();
    const response = await fetch(
      "http://localhost:3030/create-embedded-payment-link",
      {
        method: "POST",
      }
    );
    if (!response.ok) {
      console.log("Server doesn't response");
    }

    const result = await response.json();
    setPayOSConfig((oldConfig) => ({
      ...oldConfig,
      CHECKOUT_URL: result.checkoutUrl,
    }));

    setIsOpen(true);
    setIsCreatingLink(false);
  };

  useEffect(() => {
    if (payOSConfig.CHECKOUT_URL != null) {
      open();
    }
  }, [payOSConfig]);
  return message ? (
    <Message message={message} />
  ) : (
    <div className="main-box">
      <div>
        <div className="checkout">
          <div className="product">
            <p>
              <strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly
            </p>
            <p>
              <strong>Giá tiền:</strong> 2000 VNĐ
            </p>
            <p>
              <strong>Số lượng:</strong> 1
            </p>
          </div>
          <div className="flex">
            {!isOpen ? (
              <div>
                {isCreatingLink ? (
                  <div
                    style={{
                      textAlign: "center",
                      padding: "10px",
                      fontWeight: "600",
                    }}
                  >
                    Creating Link...
                  </div>
                ) : (
                  <button
                    id="create-payment-link-btn"
                    onClick={(event) => {
                      event.preventDefault();
                      handleGetPaymentLink();
                    }}
                  >
                    Tạo Link thanh toán Embedded
                  </button>
                )}
              </div>
            ) : (
              <button
                style={{
                  backgroundColor: "gray",
                  color: "white",
                  width: "100%",
                  paddingTop: "10px",
                  paddingBottom: "10px",
                  fontSize: "14px",
                  marginTop: "5px",
                }}
                onClick={(event) => {
                  event.preventDefault();
                  setIsOpen(false);
                  exit();
                }}
              >
                Đóng Link
              </button>
            )}
          </div>
        </div>
        {isOpen && (
          <div style={{ maxWidth: "400px", padding: "2px" }}>
            Sau khi thực hiện thanh toán thành công, vui lòng đợi từ 5 - 10s để
            hệ thống tự động cập nhật.
          </div>
        )}
        <div
          id="embedded-payment-container"
          style={{
            height: "350px",
          }}
        ></div>
      </div>
    </div>
  );
};

const Message = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div class="product" style={{ textAlign: "center", fontWeight: "500" }}>
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  return <ProductDisplay />;
}
```

## React + .NET[​](#react--net "Đường dẫn trực tiếp đến React + .NET")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho .NET[​](#cài-đặt-thư-viện-payos-cho-net "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho .NET")

<!-- -->

* dotnet
* NuGet

```
dotnet add package payOS
```

```
Install-Package payOS
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout và import usePayOS[​](#cài-đặt-thư-viện-payos-checkout-và-import-usepayos "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout và import usePayOS")

```
npm install @payos/payos-checkout
# hoặc
yarn add @payos/payos-checkout
```

### Khởi tạo config cho việc gọi hook usePayOS[​](#khởi-tạo-config-cho-việc-gọi-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho việc gọi hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán[​](#sử-dụng-thư-viện-payos-checkout-để-thực-hiện-việc-nhúng-link-thanh-toán "Đường dẫn trực tiếp đến Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán")

Gọi hook usePayOS trong thư viện PayOSCheckout để sử dụng 2 phương thức open() và exit() để lần lượt nhúng và gỡ bỏ giao diện thanh toán trên trang web.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
# server side
dotnet run

# client side
npm start
```

### Mã nguồn[​](#mã-nguồn-10 "Đường dẫn trực tiếp đến Mã nguồn")

* Server.cs
* App.js

/Server.cs

```
using Microsoft.AspNetCore;
using Microsoft.AspNetCore.Mvc;
using Net.payOS;
using Net.payOS.Types;

namespace server.Controllers
{
    public class Program
    {
        public static void Main(string[] args)
        {
            WebHost.CreateDefaultBuilder(args)
              .UseUrls("http://localhost:3030/")
              .UseWebRoot("public")
              .UseStartup<Startup>()
              .Build()
              .Run();
        }
    }

    public class Startup
    {
        public void ConfigureServices(IServiceCollection services)
        {
            services.AddControllers();
        }
        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
        {
            if (env.IsDevelopment()) app.UseDeveloperExceptionPage();
            app.UseRouting();
            app.UseStaticFiles();
            app.UseEndpoints(endpoints =>
            {
                endpoints.MapControllers();
                endpoints.MapGet("/", context =>
                {
                    context.Response.Redirect("/index.html");
                    return Task.CompletedTask;
                });
            });
        }
    }

    [Route("create-embedded-payment-link")]
    [ApiController]
    public class CheckoutApiController : Controller
    {
        [HttpPost]
        public async Task<IActionResult> Create()
        {
            // Keep your PayOS key protected by including it by an env variable
            var clientId = "YOUR_CLIENT_ID";
            var apiKey = "YOUR_API_KEY";
            var checksumKey = "YOUR_CHECKSUM_KEY";

            var payOS = new PayOS(clientId, apiKey, checksumKey);

            var domain = "http://localhost:3030/";

            var paymentLinkRequest = new PaymentData(
                orderCode: int.Parse(DateTimeOffset.Now.ToString("ffffff")),
                amount: 2000,
                description: "Thanh toan don hang",
                items: [new("Mì tôm hảo hảo ly", 1, 2000)],
                returnUrl: domain,
                cancelUrl: domain
            );
            var response = await payOS.createPaymentLink(paymentLinkRequest);

            return json(response);
        }
    }
}
```

/client/src/App.js

```
import React, { useState, useEffect } from "react";
import { usePayOS } from "@payos/payos-checkout";
import "./App.css";

const ProductDisplay = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [message, setMessage] = useState("");
  const [isCreatingLink, setIsCreatingLink] = useState(false);

  const [payOSConfig, setPayOSConfig] = useState({
    RETURN_URL: window.location.href, // required
    ELEMENT_ID: "embedded-payment-container", // required
    CHECKOUT_URL: null, // required
    embedded: true, // Nếu dùng giao diện nhúng
    onSuccess: (event) => {
      //TODO: Hành động sau khi người dùng thanh toán đơn hàng thành công
      setIsOpen(false);
      setMessage("Thanh toan thanh cong");
    },
  });

  const { open, exit } = usePayOS(payOSConfig);

  const handleGetPaymentLink = async () => {
    setIsCreatingLink(true);
    exit();
    const response = await fetch(
      "http://localhost:3030/create-embedded-payment-link",
      {
        method: "POST",
      }
    );
    if (!response.ok) {
      console.log("Server doesn't response");
    }

    const result = await response.json();
    setPayOSConfig((oldConfig) => ({
      ...oldConfig,
      CHECKOUT_URL: result.checkoutUrl,
    }));

    setIsOpen(true);
    setIsCreatingLink(false);
  };

  useEffect(() => {
    if (payOSConfig.CHECKOUT_URL != null) {
      open();
    }
  }, [payOSConfig]);
  return message ? (
    <Message message={message} />
  ) : (
    <div className="main-box">
      <div>
        <div className="checkout">
          <div className="product">
            <p>
              <strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly
            </p>
            <p>
              <strong>Giá tiền:</strong> 2000 VNĐ
            </p>
            <p>
              <strong>Số lượng:</strong> 1
            </p>
          </div>
          <div className="flex">
            {!isOpen ? (
              <div>
                {isCreatingLink ? (
                  <div
                    style={{
                      textAlign: "center",
                      padding: "10px",
                      fontWeight: "600",
                    }}
                  >
                    Creating Link...
                  </div>
                ) : (
                  <button
                    id="create-payment-link-btn"
                    onClick={(event) => {
                      event.preventDefault();
                      handleGetPaymentLink();
                    }}
                  >
                    Tạo Link thanh toán Embedded
                  </button>
                )}
              </div>
            ) : (
              <button
                style={{
                  backgroundColor: "gray",
                  color: "white",
                  width: "100%",
                  paddingTop: "10px",
                  paddingBottom: "10px",
                  fontSize: "14px",
                  marginTop: "5px",
                }}
                onClick={(event) => {
                  event.preventDefault();
                  setIsOpen(false);
                  exit();
                }}
              >
                Đóng Link
              </button>
            )}
          </div>
        </div>
        {isOpen && (
          <div style={{ maxWidth: "400px", padding: "2px" }}>
            Sau khi thực hiện thanh toán thành công, vui lòng đợi từ 5 - 10s để
            hệ thống tự động cập nhật.
          </div>
        )}
        <div
          id="embedded-payment-container"
          style={{
            height: "350px",
          }}
        ></div>
      </div>
    </div>
  );
};

const Message = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div class="product" style={{ textAlign: "center", fontWeight: "500" }}>
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  return <ProductDisplay />;
}
```

## React + Java[​](#react--java "Đường dẫn trực tiếp đến React + Java")

## Thiết lập Server[​](#thiết-lập-server "Đường dẫn trực tiếp đến Thiết lập Server")

### Cài đặt thư viện payOS cho Java[​](#cài-đặt-thư-viện-payos-cho-java "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho Java")

<!-- -->

* Maven
* Gradle

Thêm đoạn code sau vào POM và thay VERSION bằng phiên bản bạn muốn sử dụng.

```
<dependency>
  <groupId>vn.payos</groupId>
  <artifactId>payos-java</artifactId>
  <version>{VERSION}</version>
</dependency>
```

Thêm đoạn code sau vào build.gradle và thay VERSION bằng phiên bản bạn muốn sử dụng.

```
implementation 'vn.payos:payos-java:{VERSION}'
```

### Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo trên trang [payOS](https://my.payos.vn).

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng.

### Cung cấp returnUrl và cancelUrl[​](#cung-cấp-returnurl-và-cancelurl "Đường dẫn trực tiếp đến Cung cấp returnUrl và cancelUrl")

Chỉ định URL công khai cho trang thanh toán thành công và hủy thanh toán. Bạn cũng có thể xử lý cả trạng thái thành công và hủy với cùng một URL.

### Chuyển hướng tới trang thanh toán[​](#chuyển-hướng-tới-trang-thanh-toán "Đường dẫn trực tiếp đến Chuyển hướng tới trang thanh toán")

Sau khi tạo link thanh toán thành công, chuyển hướng khách hàng tới trang thanh toán trả về trong phản hồi.

## Xây dựng giao diện[​](#xây-dựng-giao-diện "Đường dẫn trực tiếp đến Xây dựng giao diện")

### Cài đặt thư viện payos-checkout và import usePayOS[​](#cài-đặt-thư-viện-payos-checkout-và-import-usepayos "Đường dẫn trực tiếp đến Cài đặt thư viện payos-checkout và import usePayOS")

```
npm install @payos/payos-checkout
# hoặc
yarn add @payos/payos-checkout
```

### Khởi tạo config cho việc gọi hook usePayOS[​](#khởi-tạo-config-cho-việc-gọi-hook-usepayos "Đường dẫn trực tiếp đến Khởi tạo config cho việc gọi hook usePayOS")

Có 3 trường bắt buộc phải khởi tạo:

* **RETURN\_URL**: url dẫn đến trang web khi thanh toán thành công.
* **ELEMENT\_ID**: id của 1 component mà bạn muốn nhúng giao diện thanh toán của payOS vào
* **CHECKOUT\_URL**: đường link dẫn đến giao diện thanh toán sẽ được nhúng vào trang web của bạn

Vì thực hiện giao diện thanh toán nhúng nên ta sẽ sử dụng thêm các property như sau:

* `embedded: true` để sử dụng giao diện nhúng
* **onSuccess(event)**: gọi hàm bạn truyền vào nếu như người dùng thực hiện thanh toán thành công

Thông tin chi tiết hơn tại: [payos-checkout](https://payos.vn/docs/sdks/front-end/script-js/)

### Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán[​](#sử-dụng-thư-viện-payos-checkout-để-thực-hiện-việc-nhúng-link-thanh-toán "Đường dẫn trực tiếp đến Sử dụng thư viện payos-checkout để thực hiện việc nhúng link thanh toán")

Gọi hook usePayOS trong thư viện PayOSCheckout để sử dụng 2 phương thức open() và exit() để lần lượt nhúng và gỡ bỏ giao diện thanh toán trên trang web.

## Chạy thử[​](#chạy-thử "Đường dẫn trực tiếp đến Chạy thử")

Thêm `"proxy": "http://localhost:3030"` vào file `package.json`.

Chạy server của bạn và truy cập vào [`http://localhost:3000`](http://localhost:3000) để bắt đầu tạo link thanh toán.

```
# server side
java -cp .\target\payos-payment-1.0-SNAPSHOT-jar-with-dependencies.jar vn.payos.sample.Server

# client side
npm start
```

### Mã nguồn[​](#mã-nguồn-11 "Đường dẫn trực tiếp đến Mã nguồn")

* Server.java
* pom.xml
* App.js

/Server.java

```
package vn.payos.sample;

import static spark.Spark.post;
import static spark.Spark.port;
import static spark.Spark.staticFiles;

import java.nio.file.Paths;

import vn.payos.PayOS;
import vn.payos.type.CheckoutResponseData;
import vn.payos.type.ItemData;
import vn.payos.type.PaymentData;

public class Server {
    public static void main(String[] args) {
        port(3000);
        String clientId = "YOUR_CLIENT_ID";
        String apiKey = "YOUR_API_KEY";
        String checksumKey = "YOUR_CHECKSUM_KEY";

        final PayOS payOS = new PayOS(clientId, apiKey, checksumKey);

        staticFiles.externalLocation(
                Paths.get("public").toAbsolutePath().toString());

        post("/create-embedded-payment-link", (request, response) -> {
            String domain = "http://localhost:3000/";
            Long orderCode = System.currentTimeMillis() / 1000;
            ItemData itemData = ItemData
                    .builder()
                    .name("Mỳ tôm Hảo Hảo ly")
                    .quantity(1)
                    .price(2000)
                    .build();

            PaymentData paymentData = PaymentData
                    .builder()
                    .orderCode(orderCode)
                    .amount(2000)
                    .description("Thanh toán đơn hàng")
                    .returnUrl(domain)
                    .cancelUrl(domain)
                    .item(itemData)
                    .build();

            CheckoutResponseData result = payOS.createPaymentLink(paymentData);
            response.type("application/json");
            return new com.google.gson.Gson().toJson(result);
        });
    }
}
```

/pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>vn.payos.sample</groupId>
  <artifactId>payos-payment</artifactId>
  <version>1.0-SNAPSHOT</version>

  <name>sample</name>
  <!-- FIXME change it to the project's website -->
  <url>http://www.example.com</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
  </properties>

  <dependencies>
    <dependency>
      <groupId>com.sparkjava</groupId>
      <artifactId>spark-core</artifactId>
      <version>2.9.4</version>
    </dependency>
    <dependency>
      <groupId>vn.payos</groupId>
      <artifactId>payos-java</artifactId>
      <version>1.0.1</version>
    </dependency>
  </dependencies>

  <build>
    <pluginManagement><!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) -->
      <plugins>
        <!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle -->
        <plugin>
          <artifactId>maven-clean-plugin</artifactId>
          <version>3.1.0</version>
        </plugin>
        <!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging -->
        <plugin>
          <artifactId>maven-resources-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>3.8.0</version>
        </plugin>
        <plugin>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.22.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-jar-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-install-plugin</artifactId>
          <version>2.5.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.8.2</version>
        </plugin>
        <!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle -->
        <plugin>
          <artifactId>maven-site-plugin</artifactId>
          <version>3.7.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-project-info-reports-plugin</artifactId>
          <version>3.0.0</version>
        </plugin>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <executions>
            <execution>
                <phase>package</phase>
                <goals>
                <goal>single</goal>
                </goals>
            </execution>
            </executions>
            <configuration>
            <descriptorRefs>
                <!-- This tells Maven to include all dependencies -->
                <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
            <archive>
                <manifest>
                <mainClass>vn.payos.sample.Server</mainClass>
                </manifest>
            </archive>
            </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
</project>
```

/client/src/App.js

```
import React, { useState, useEffect } from "react";
import { usePayOS } from "@payos/payos-checkout";
import "./App.css";

const ProductDisplay = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [message, setMessage] = useState("");
  const [isCreatingLink, setIsCreatingLink] = useState(false);

  const [payOSConfig, setPayOSConfig] = useState({
    RETURN_URL: window.location.href, // required
    ELEMENT_ID: "embedded-payment-container", // required
    CHECKOUT_URL: null, // required
    embedded: true, // Nếu dùng giao diện nhúng
    onSuccess: (event) => {
      //TODO: Hành động sau khi người dùng thanh toán đơn hàng thành công
      setIsOpen(false);
      setMessage("Thanh toan thanh cong");
    },
  });

  const { open, exit } = usePayOS(payOSConfig);

  const handleGetPaymentLink = async () => {
    setIsCreatingLink(true);
    exit();
    const response = await fetch(
      "http://localhost:3030/create-embedded-payment-link",
      {
        method: "POST",
      }
    );
    if (!response.ok) {
      console.log("Server doesn't response");
    }

    const result = await response.json();
    setPayOSConfig((oldConfig) => ({
      ...oldConfig,
      CHECKOUT_URL: result.checkoutUrl,
    }));

    setIsOpen(true);
    setIsCreatingLink(false);
  };

  useEffect(() => {
    if (payOSConfig.CHECKOUT_URL != null) {
      open();
    }
  }, [payOSConfig]);
  return message ? (
    <Message message={message} />
  ) : (
    <div className="main-box">
      <div>
        <div className="checkout">
          <div className="product">
            <p>
              <strong>Tên sản phẩm:</strong> Mì tôm Hảo Hảo ly
            </p>
            <p>
              <strong>Giá tiền:</strong> 2000 VNĐ
            </p>
            <p>
              <strong>Số lượng:</strong> 1
            </p>
          </div>
          <div className="flex">
            {!isOpen ? (
              <div>
                {isCreatingLink ? (
                  <div
                    style={{
                      textAlign: "center",
                      padding: "10px",
                      fontWeight: "600",
                    }}
                  >
                    Creating Link...
                  </div>
                ) : (
                  <button
                    id="create-payment-link-btn"
                    onClick={(event) => {
                      event.preventDefault();
                      handleGetPaymentLink();
                    }}
                  >
                    Tạo Link thanh toán Embedded
                  </button>
                )}
              </div>
            ) : (
              <button
                style={{
                  backgroundColor: "gray",
                  color: "white",
                  width: "100%",
                  paddingTop: "10px",
                  paddingBottom: "10px",
                  fontSize: "14px",
                  marginTop: "5px",
                }}
                onClick={(event) => {
                  event.preventDefault();
                  setIsOpen(false);
                  exit();
                }}
              >
                Đóng Link
              </button>
            )}
          </div>
        </div>
        {isOpen && (
          <div style={{ maxWidth: "400px", padding: "2px" }}>
            Sau khi thực hiện thanh toán thành công, vui lòng đợi từ 5 - 10s để
            hệ thống tự động cập nhật.
          </div>
        )}
        <div
          id="embedded-payment-container"
          style={{
            height: "350px",
          }}
        ></div>
      </div>
    </div>
  );
};

const Message = ({ message }) => (
  <div className="main-box">
    <div className="checkout">
      <div class="product" style={{ textAlign: "center", fontWeight: "500" }}>
        <p>{message}</p>
      </div>
      <form action="/">
        <button type="submit" id="create-payment-link-btn">
          Quay lại trang thanh toán
        </button>
      </form>
    </div>
  </div>
);

export default function App() {
  return <ProductDisplay />;
}
```
# Webhook thông tin thanh toán

[![payOS Logo](https://payos.vn/wp-content/uploads/2025/06/Casso-payOSLogo-1.svg)](https://payos.vn)

* Webhook thanh toán
  * EventWebhook nhận thông tin thanh toán

[API docs by Redocly](https://redocly.com/redoc/)

# payOS Payment Webhook API<!-- --> (<!-- -->latest<!-- -->)

payOS support

<!-- -->

:

<!-- -->

<support@payos.vn> URL: <https://payos.vn>

<!-- -->

[Terms of Service](https://payos.vn/thoa-thuan-su-dung/)

Webhook API cho hệ thống thanh toán payOS.

### Trước khi bắt đầu

* Bạn đã tạo một tài khoản <https://my.payos.vn>.
* Bạn đã xác thực một doanh nghiệp hoặc cá nhân trên <https://my.payos.vn>, [xem hướng dẫn](https://payos.vn/docs/huong-dan-su-dung/xac-thuc-to-chuc/)
* Bạn đã tạo một kênh thanh toán, [xem hướng dẫn](https://payos.vn/docs/huong-dan-su-dung/tao-kenh-thanh-toan/).

### Môi trường

* Production: <https://api-merchant.payos.vn>

Đăng ký chương trình đối tác tích hợp payOS [Tại đây](https://payos.vn/chuong-trinh-doi-tac-tich-hop/)

## [](#tag/payment-webhook)Webhook thanh toán

Webhook thanh toán

## [](#tag/payment-webhook/operation/payment-webhook)Webhook nhận thông tin thanh toán<!-- --> <!-- -->Webhook

Webhook của cửa hàng dùng để nhận dữ liệu thanh toán từ payOS, [Dữ liệu mẫu](https://payos.vn/docs/tich-hop-webhook/kiem-tra-du-lieu-voi-signature/)

##### Request Body schema: application/json

|                   |                                                                                                                                    |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| coderequired      | stringMã lỗi                                                                                                                       |
| descrequired      | stringThông tin lỗi                                                                                                                |
| successrequired   | boolean                                                                                                                            |
| datarequired      | object                                                                                                                             |
| signaturerequired | stringChữ kí để kiểm tra thông tin, [chi tiết dữ liệu mẫu](https://payos.vn/docs/tich-hop-webhook/kiem-tra-du-lieu-voi-signature/) |

### Responses

**200<!-- -->**

Phản hồi trạng thái mã 2XX để xác nhận webhook gửi thành công

### <!-- -->Request samples<!-- -->

* Payload

Content type

application/json

Copy

Expand all  Collapse all

`{
"code": "00",
"desc": "success",
"success": true,
"data": {
"orderCode": 123,
"amount": 3000,
"description": "VQRIO123",
"accountNumber": "12345678",
"reference": "TF230204212323",
"transactionDateTime": "2023-02-04 18:25:00",
"currency": "VND",
"paymentLinkId": "124c33293c43417ab7879e14c8d9eb18",
"code": "00",
"desc": "Thành công",
"counterAccountBankId": "",
"counterAccountBankName": "",
"counterAccountName": "",
"counterAccountNumber": "",
"virtualAccountName": "",
"virtualAccountNumber": ""
},
"signature": "8d8640d802576397a1ce45ebda7f835055768ac7ad2e0bfb77f9b8f12cca4c7f"
}`
# Return URL

Sau khi thực hiện thanh toán trình duyệt sẽ điều hướng về trang mà người dùng đã khai báo ở `returnUrl` đã được khai báo trong [API tạo link thanh toán](/docs/api/.md). Ngược lại, nếu người dùng hủy thanh toán, trình duyệt sẽ điều hướng về `cancelUrl`.

`returnUrl` và `cancelUrl` sẽ được gắn các query params chứa thông tin thanh toán phục vụ cho việc xử lý ở phía giao diện người dùng.

### Ví dụ về Return URL:[​](#ví-dụ-về-return-url "Đường dẫn trực tiếp đến Ví dụ về Return URL:")

thông tin

`https://your-website.com/return-url/?code=00&id=2e4acf1083304877bf1a8c108b30cccd&cancel=true&status=CANCELLED&orderCode=803347`

### Mô tả dữ liệu trả về qua Query Params:[​](#mô-tả-dữ-liệu-trả-về-qua-query-params "Đường dẫn trực tiếp đến Mô tả dữ liệu trả về qua Query Params:")

| Tên       | Giá trị                          | Mô tả                 | Tập giá trị                                                                                                     |
| --------- | -------------------------------- | --------------------- | --------------------------------------------------------------------------------------------------------------- |
| code      | 00                               | Mã lỗi                | - 00 - Thành công<br />- 01 - Invalid Params                                                                    |
| id        | 2e4acf1083304877bf1a8c108b30cccd | Payment Link Id       | string                                                                                                          |
| cancel    | true                             | Trạng thái hủy        | - true - Đã hủy thanh toán<br />- false - Đã thanh toán hoặc chờ thanh toán                                     |
| status    | CANCELLED                        | Trạng thái thanh toán | - PAID - Đã thanh toán<br />- PENDING - Chờ thanh toán<br />- PROCESSING - Đang xử lý<br />- CANCELLED - Đã hủy |
| orderCode | 803347                           | Mã đơn hàng           | number                                                                                                          |
# Kiểm tra dữ liệu với signature

## Kiểm tra thông tin bằng chữ ký (payment-requests)[​](#kiểm-tra-thông-tin-bằng-chữ-ký-payment-requests "Đường dẫn trực tiếp đến Kiểm tra thông tin bằng chữ ký (payment-requests)")

Giá trị `signature` được dùng để kiểm tra tính chính xác của dữ liệu.

### Cách tạo signature[​](#cách-tạo-signature "Đường dẫn trực tiếp đến Cách tạo signature")

* Sử dụng thuật toán HMAC\_SHA256 để tạo signature.
* data tạo signature dạng: key1=value1\&key2=value2... (key1: tên field, value1 = giá trị của key1).
* Dữ liệu tạo signature sắp xếp theo key thứ tự alphabet.
* Cấu trúc: hash\_hmac("sha256", string $data , string $checksum\_key)

Lưu ý:

Checksum Key được tạo ra sau khi tạo cổng thanh toán thành công

<!-- -->

### Code mẫu kiểm tra chính xác dữ liệu[​](#code-mẫu-kiểm-tra-chính-xác-dữ-liệu "Đường dẫn trực tiếp đến Code mẫu kiểm tra chính xác dữ liệu")

* PHP
* Javascript
* Python
* Java

```
    <?php
      $checksum_key = "1a54716c8f0efb2744fb28b6e38b25da7f67a925d98bc1c18bd8faaecadd7675";
      $webhookData = array(
          "code" => "00",
          "desc" => "success",
          "success" => true,
          "data" => array(
              "orderCode"           => 123,
              "amount"              => 3000,
              "description"         => "VQRIO123",
              "accountNumber"       => "12345678",
              "reference"           => "TF230204212323",
              "transactionDateTime" => "2023-02-04 18:25:00",
              "currency"            => "VND",
              "paymentLinkId"       => "124c33293c43417ab7879e14c8d9eb18",
              "code"                => "00",
              "desc"                => "Thành công",
              "counterAccountBankId"    => "",
              "counterAccountBankName"  => "",
              "counterAccountName"      => "",
              "counterAccountNumber"    => "",
              "virtualAccountName"      => "",
              "virtualAccountNumber"    => ""
          ),
          "signature"             => "412e915d2871504ed31be63c8f62a149a4410d34c4c42affc9006ef9917eaa03"
      );

      function isValidData($transaction, $transaction_signature, $checksum_key)
      {
          ksort($transaction);
          $transaction_str_arr = [];
          foreach ($transaction as $key => $value) {
              if (in_array($value, ["undefined", "null"]) || gettype($value) == "NULL") {
                  $value = "";
              }

              if (is_array($value)) {
                  $valueSortedElementObj = array_map(function ($ele) {
                      ksort($ele);
                      return $ele;
                  }, $value);
                  $value = json_encode($valueSortedElementObj, JSON_UNESCAPED_UNICODE);
              }
              $transaction_str_arr[] = $key . "=" . $value;
          }
          $transaction_str = implode("&", $transaction_str_arr);
          dump($transaction_str);
          $signature = hash_hmac("sha256", $transaction_str, $checksum_key);
          dump($signature);
          return $signature == $transaction_signature;
      }

      isValidData($webhookData['data'], $webhookData['signature'], $checksum_key);
```

```
import { createHmac } from 'crypto';

const checksumKey = '1a54716c8f0efb2744fb28b6e38b25da7f67a925d98bc1c18bd8faaecadd7675';
const webhookData = {
  code: '00',
  desc: 'success',
  success: true,
  data: {
    orderCode: 123,
    amount: 3000,
    description: 'VQRIO123',
    accountNumber: '12345678',
    reference: 'TF230204212323',
    transactionDateTime: '2023-02-04 18:25:00',
    currency: 'VND',
    paymentLinkId: '124c33293c43417ab7879e14c8d9eb18',
    code: '00',
    desc: 'Thành công',
    counterAccountBankId: '',
    counterAccountBankName: '',
    counterAccountName: '',
    counterAccountNumber: '',
    virtualAccountName: '',
    virtualAccountNumber: '',
  },
  signature: '412e915d2871504ed31be63c8f62a149a4410d34c4c42affc9006ef9917eaa03',
};

function sortObjDataByKey(object) {
  const orderedObject = Object.keys(object)
    .sort()
    .reduce((obj, key) => {
      obj[key] = object[key];
      return obj;
    }, {});
  return orderedObject;
}

function convertObjToQueryStr(object) {
  return Object.keys(object)
    .filter((key) => object[key] !== undefined)
    .map((key) => {
      let value = object[key];
      // Sort nested object
      if (value && Array.isArray(value)) {
        value = JSON.stringify(value.map((val) => sortObjDataByKey(val)));
      }
      // Set empty string if null
      if ([null, undefined, 'undefined', 'null'].includes(value)) {
        value = '';
      }

      return `${key}=${value}`;
    })
    .join('&');
}

function isValidData(data, currentSignature, checksumKey) {
  const sortedDataByKey = sortObjDataByKey(data);
  const dataQueryStr = convertObjToQueryStr(sortedDataByKey);
  const dataToSignature = createHmac('sha256', checksumKey).update(dataQueryStr).digest('hex');
  return dataToSignature == currentSignature;
}

return isValidData(webhookData.data, webhookData.signature, checksumKey);
```

```
    // Python3
    import hmac
    import hashlib

    checksum_key = "1a54716c8f0efb2744fb28b6e38b25da7f67a925d98bc1c18bd8faaecadd7675"
    webhook_data = {
      "code": '00',
      "desc": 'success',
      "success": True,
      "data": {
          "orderCode": 123,
          "amount": 3000,
          "description": 'VQRIO123',
          "accountNumber": '12345678',
          "reference": 'TF230204212323',
          "transactionDateTime": '2023-02-04 18:25:00',
          "currency": 'VND',
          "paymentLinkId": '124c33293c43417ab7879e14c8d9eb18',
          "code": '00',
          "desc": 'Thành công',
          "counterAccountBankId": '',
          "counterAccountBankName": '',
          "counterAccountName": '',
          "counterAccountNumber": '',
          "virtualAccountName": '',
          "virtualAccountNumber": '',
      },
      "signature": '412e915d2871504ed31be63c8f62a149a4410d34c4c42affc9006ef9917eaa03'
    }

    def convertObjToQueryStr(obj: dict) -> str:
        query_string = []

        for key, value in obj.items():
            value_as_string = ""
            if isinstance(value, (int, float, bool)):
                value_as_string = str(value)
            elif value in [None, 'null', 'NULL']:
                value_as_string = ""
            elif isinstance(value, list):
                value_as_string = json.dumps([sortObjDataByKey(item) for item in value], separators=(',', ':')).replace('None', 'null')
            else:
                value_as_string = str(value)
            query_string.append(f"{key}={value_as_string}")

        return "&".join(query_string)

    def sortObjDataByKey(obj: dict) -> dict:
        return dict(sorted(obj.items()))

    def isValidData(data,signature,key):
        sorted_data_by_key = sortObjDataByKey(data)
        data_query_str = convertObjToQueryStr(sorted_data_by_key)
        print(data_query_str)
        data_to_signature =  hmac.new(key.encode("utf-8"), msg=data_query_str.encode("utf-8"), digestmod=hashlib.sha256).hexdigest()

        return data_to_signature == signature
```

```
    import java.util.*;

    import org.apache.commons.codec.digest.HmacUtils;
    import org.json.JSONObject;

    public class Main {

        static String checksumKey = "1a54716c8f0efb2744fb28b6e38b25da7f67a925d98bc1c18bd8faaecadd7675";

        static String transaction = "{'orderCode':123,'amount':3000,'description':'VQRIO123','accountNumber':'12345678','reference':'TF230204212323','transactionDateTime':'2023-02-04 18:25:00','currency':'VND','paymentLinkId':'124c33293c43417ab7879e14c8d9eb18','code':'00','desc':'Thành công','counterAccountBankId':'','counterAccountBankName':'','counterAccountName':'','counterAccountNumber':'','virtualAccountName':'','virtualAccountNumber':''}";

        static String transactionSignature = "412e915d2871504ed31be63c8f62a149a4410d34c4c42affc9006ef9917eaa03";

        public static Boolean isValidData(String transaction, String transactionSignature) {
            try {
                JSONObject jsonObject = new JSONObject(transaction);
                Iterator<String> sortedIt = sortedIterator(jsonObject.keys(), (a, b) -> a.compareTo(b));

                StringBuilder transactionStr = new StringBuilder();
                while (sortedIt.hasNext()) {
                    String key = sortedIt.next();
                    String value = jsonObject.get(key).toString();
                    transactionStr.append(key);
                    transactionStr.append('=');
                    transactionStr.append(value);
                    if (sortedIt.hasNext()) {
                        transactionStr.append('&');
                    }
                }

                String signature = new HmacUtils("HmacSHA256", checksumKey).hmacHex(transactionStr.toString());
                return signature.equals(transactionSignature);
            } catch (Exception e) {
                e.printStackTrace();
            }
            return false;
        }

        public static Iterator<String> sortedIterator(Iterator<?> it, Comparator<String> comparator) {
            List<String> list = new ArrayList<String>();
            while (it.hasNext()) {
                list.add((String) it.next());
            }

            Collections.sort(list, comparator);
            return list.iterator();
        }

        public static void main(String[] args) {
            System.out.println(isValidData(transaction, transactionSignature));
        }
    }
```

Xem chi tiết về API [tại đây](/docs/api/.md#tag/payment-webhook/operation/confirm-webhook).

## Thông tin dữ liệu mẫu webhook link thanh toán[​](#thông-tin-dữ-liệu-mẫu-webhook-link-thanh-toán "Đường dẫn trực tiếp đến Thông tin dữ liệu mẫu webhook link thanh toán")

<!-- -->

|                   |                                                                                                                                    |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------- |
| coderequired      | stringMã lỗi                                                                                                                       |
| descrequired      | stringThông tin lỗi                                                                                                                |
| successrequired   | boolean                                                                                                                            |
| datarequired      | object                                                                                                                             |
| signaturerequired | stringChữ kí để kiểm tra thông tin, [chi tiết dữ liệu mẫu](https://payos.vn/docs/tich-hop-webhook/kiem-tra-du-lieu-voi-signature/) |

Copy

Expand all  Collapse all

`{
"code": "00",
"desc": "success",
"success": true,
"data": {
"orderCode": 123,
"amount": 3000,
"description": "VQRIO123",
"accountNumber": "12345678",
"reference": "TF230204212323",
"transactionDateTime": "2023-02-04 18:25:00",
"currency": "VND",
"paymentLinkId": "124c33293c43417ab7879e14c8d9eb18",
"code": "00",
"desc": "Thành công",
"counterAccountBankId": "",
"counterAccountBankName": "",
"counterAccountName": "",
"counterAccountNumber": "",
"virtualAccountName": "",
"virtualAccountNumber": ""
},
"signature": "8d8640d802576397a1ce45ebda7f835055768ac7ad2e0bfb77f9b8f12cca4c7f"
}`

## Kiểm tra thông tin bằng chữ ký (payouts)[​](#kiểm-tra-thông-tin-bằng-chữ-ký-payouts "Đường dẫn trực tiếp đến Kiểm tra thông tin bằng chữ ký (payouts)")

### Cách tạo và cấu trúc của signature[​](#cách-tạo-và-cấu-trúc-của-signature "Đường dẫn trực tiếp đến Cách tạo và cấu trúc của signature")

* Sử dụng thuật toán HMAC\_SHA256 để tạo signature.
* data tạo signature dạng: key1=value1\&key2=value2... (key1: tên field, value1 = **encodeURI(giá trị của key1)**).
* Giá trị của key nếu là `null` hay `undefined` sẽ là chuỗi rỗng `""`
* Dữ liệu tạo signature sắp xếp theo key thứ tự alphabet, thứ tự các phần từ trong mảng giữ nguyên.
* Cấu trúc: hash\_hmac("sha256", string $data , string $checksum\_key)

Lưu ý:

Checksum key được tạo ra khi tạo kênh chuyển tiền thành công và có thể thay đổi trên [my.payos.vn](https://my.payos.vn)

cảnh báo

Chữ ký dùng cho API `payouts` **KHÁC** với chữ ký dùng cho API `payment-requests`

### Code mẫu kiểm tra chính xác dữ liệu[​](#code-mẫu-kiểm-tra-chính-xác-dữ-liệu-1 "Đường dẫn trực tiếp đến Code mẫu kiểm tra chính xác dữ liệu")

* Javascript

```
/**
 * Deep sort object with optional array sorting
 * @param obj Object data
 * @param sortArrays Whether to sort arrays or maintain their order
 * @returns Sorted object data
 */
function deepSortObj(obj, sortArrays = false) {
  return Object.keys(obj)
    .sort()
    .reduce((acc, key) => {
      const value = obj[key];

      if (Array.isArray(value)) {
        if (sortArrays) {
          // Sort array elements
          acc[key] = value
            .map((item) =>
              typeof item === 'object' && item !== null ? deepSortObj(item, sortArrays) : item,
            )
            .sort((a, b) => {
              // Sort primitive values
              if (typeof a !== 'object' && typeof b !== 'object') {
                return String(a).localeCompare(String(b));
              }
              // For objects, sort by JSON string representation
              return JSON.stringify(a).localeCompare(JSON.stringify(b));
            });
        } else {
          // Maintain array order, but sort objects within arrays
          acc[key] = value.map((item) =>
            typeof item === 'object' && item !== null ? deepSortObj(item, sortArrays) : item,
          );
        }
      } else if (typeof value === 'object' && value !== null) {
        acc[key] = deepSortObj(value, sortArrays);
      } else {
        acc[key] = value;
      }

      return acc;
    }, {});
}

/**
 * Create HMAC SHA-256 signature using Web Crypto API (browser-compatible)
 *
 * @param {string} secretKey - Secret key for HMAC signature generation
 * @param {object} jsonData - JSON object data to be signed
 * @returns {Promise<string>} HMAC signature in hexadecimal format
 *
 * @example
 * // Basic usage
 * const signature = await createSignatureBrowser('secret', { name: 'John', age: 30 });
 */
async function createSignatureBrowser(secretKey, jsonData) {
  const sortedData = deepSortObj(jsonData, false);

  const queryString = Object.keys(sortedData)
    .map((key) => {
      let value = sortedData[key];

      // Handle arrays by JSON stringify them
      if (Array.isArray(value)) {
        value = JSON.stringify(value);
      }
      // Handle nested objects
      if (typeof value === 'object' && value !== null && !Array.isArray(value)) {
        value = JSON.stringify(value);
      }
      // Handle null/undefined values
      if (value === null || value === undefined) {
        value = '';
      }

      return `${encodeURIComponent(key)}=${encodeURIComponent(String(value))}`;
    })
    .join('&');

  // Web Crypto API implementation
  const encoder = new TextEncoder();
  const keyData = encoder.encode(secretKey);
  const messageData = encoder.encode(queryString);

  const cryptoKey = await crypto.subtle.importKey(
    'raw',
    keyData,
    { name: 'HMAC', hash: 'SHA-256' },
    false,
    ['sign'],
  );

  const signature = await crypto.subtle.sign('HMAC', cryptoKey, messageData);
  const hashArray = Array.from(new Uint8Array(signature));
  const hashHex = hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');

  return hashHex;
}

/**
 * Verify signature using Web Crypto API
 *
 * @param {string} secretKey - Secret key used for signature generation
 * @param {object} jsonData - JSON object data that was signed
 * @param {string} expectedSignature - Expected signature to verify against
 * @returns {Promise<boolean>} true if signatures match, false otherwise
 */
async function verifySignatureBrowser(secretKey, jsonData, expectedSignature) {
  const computedSignature = await createSignatureBrowser(secretKey, jsonData);
  return computedSignature.toLowerCase() === expectedSignature.toLowerCase();
}

const payoutChecksumKey = '6e91f59952acc8918c49c4a8e380136d66d1fbbf3375926840a8a7e434d4b325';

const expectedSignature = '34d500c4e17feaad8fab528ac3ae089353e276ca9fb4c6654c06ffdfbd88cc5d';

const payoutData = {
  code: '00',
  desc: 'success',
  data: {
    payouts: [
      {
        id: 'batch_8f9520b9341144f38b9f5fbfa317db8e',
        referenceId: 'payout_1753061728877',
        transactions: [
          {
            id: 'batch_txn_fdb348c0570a4cb99009da22f9504898',
            referenceId: 'payout_1753061728877_0',
            amount: 2000,
            description: 'batch payout',
            toBin: '970422',
            toAccountNumber: '0123456789',
            toAccountName: 'NGUYEN VAN A',
            reference: '103269845',
            transactionDatetime: '2025-07-21T08:35:40+07:00',
            errorMessage: null,
            errorCode: null,
            state: 'SUCCEEDED',
          },
          {
            id: 'batch_txn_d94d371c079f4fc0ab7154e1576629d8',
            referenceId: 'payout_1753061728877_1',
            amount: 2000,
            description: 'batch payout',
            toBin: '970422',
            toAccountNumber: '0123456789',
            toAccountName: 'NGUYEN VAN A',
            reference: '103269846',
            transactionDatetime: '2025-07-21T08:35:44+07:00',
            errorMessage: null,
            errorCode: null,
            state: 'SUCCEEDED',
          },
          {
            id: 'batch_txn_71eb922201f3442d93ec5a3c77347e9f',
            referenceId: 'payout_1753061728877_2',
            amount: 2000,
            description: 'batch payout',
            toBin: '970422',
            toAccountNumber: '0123456789',
            toAccountName: 'NGUYEN VAN A',
            reference: '103269847',
            transactionDatetime: '2025-07-21T08:35:47+07:00',
            errorMessage: null,
            errorCode: null,
            state: 'SUCCEEDED',
          },
        ],
        category: ['salary'],
        approvalState: 'COMPLETED',
        createdAt: '2025-07-21T08:35:34+07:00',
      },
    ],
    pagination: {
      limit: 10,
      offset: 0,
      total: 1,
      count: 1,
      hasMore: false,
    },
  },
};

(async () => {
  const result = await verifySignatureBrowser(
    payoutChecksumKey,
    payoutData.data,
    expectedSignature,
  );

  console.log('Signature payout validation result:', result);
})();
```
# NodeJS SDK

## Trang thanh toán payOS[​](#trang-thanh-toán-payos "Đường dẫn trực tiếp đến Trang thanh toán payOS")

Khám phá mã nguồn mẫu hoàn chỉnh được phát triển bằng Framework NodeJS. Mã nguồn server-side chuyển hướng đến trang thanh toán do payOS phát triển. Trước khi bắt đầu, hãy tạo một kênh thanh toán trên trang [payOS](https://my.payos.vn).

[![Example banner](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAADddAAA3XQEZgEZdAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABiOSURBVHgB7Z2/cxtHlsffG0BnytqqxdpeexWZqiXvSO+WCGWXCcw2s5ztRaKyyyRll4nMLpP0F4jKLhMZXiQou8xDl21qTboMZ7pbn01XnS3aBKavXxOwYRk/Zgbzo9/M91NFE6IJkQL62+9Hv36PCAAAAAAAAAAAAAAAAAAAAIBfwQRUsrbWXh40qGWYWmxoefR1M/Z4EszUk89RRCfcsB+GThoDOnn+POwRUAcE7CHLy+3WhUtOiG1DIlCzYYXZYvmzFSzZx5QHTCf27+7ZRyd2KwiJg2/tzw2DgHpHn4QhAe+AgEtGxNq4SB0OrGAjc53PRbtMfiIi7lkzfiDCvmA/YLnLBQIumNU/tUWgHbGq1tp1PBZrLOwC6hkRdsDP7OMuLHWxQMA5I7Fqv0E3xLraV7uTm/vrC+dueJcD3rexdRcWOl8g4BxY+XO7Q4PofSa+od3CLsq5hTZ71Aj2jz8OuwQyBQLOiJFobXy4VXkrmxJ28TN1TcCPIeZsgIAXwIk2iq7bl/EORJuMkZgbEe/AzU4PBJwQyRo3L9GWjWnft3/sEMiC0MbMD8++o71eLzwhEBsIOCYuexxFN+Ei54hNgNkFuQerHB8IeA7nsa25R7C2RdOlBu8gVp4NBDwFCNcPXKwc8I49X94l8Csg4FewrrLEt/fqfvzjGxDyZCDgIWJxeWAeQbh+AyH/ktoLGK6yTlyBSINv1T1Grq2AXYkjm0cE4aqGmXbrnLWunYDdOe7r0W0yvE2gOrDZ7n8fPKzbOXKDasQf19s3mhfME/tu3yBQMbjTuEB/ffOdy99+/fcXtbkRVQsLDHe5XtTJra68BV5dv3o7Cug/7MM1AnWhHTFtvfH7yz98/dWL/6IKU1kLDKsLhnSbhm9V1RpX0gL/49rVm4OA9ghWF9i8pWG6UdXYuFIW2GWYL0b33PU+AF4lMA/63wU7VcpUV0bAcluIIvMElVRgFlIA0jC8WRWXuhIutCSqrHB37cM/EACzaVUpwaVewCvrV+/bfXXbPlwiAOIha+Uvb7zzTuvrv//3f5Ji1LrQwyzzE/uwTQCkJ7RZ6g+0utQqBezGirB5ingXZIHmuDggZcjtoX5gPoR4QVbIWrLe3IdSakvKUBUDS7LKvtpSVYV4F2TNkrXEf7XJrW81JbfUCHhl7eo9Yv53AiBf/vLG2++QTW49IwWoEPBQvNsEQCFwR4uIvRewOyZi/jcCoFB0iNhrAa++t/HIvpD/SgCUAnfefPsPy1bE++Qp3gpYxGsMbREA5dL2WcReCnhYXQXLC3zBWxF7J+BhwgoxL/CNto8xsVcCRrYZ+I1/iS1vBAzxAh34JWIvBCwdNAzzAwJABdx5663Lvf/96sUBlUzplxnOx3aaDwkAXZxwwJtHn4Sltukp9TKD3CqSLhoEgD5asnbdGi6R0iyw9K+6cBG3ioBu5Cri2Uu+VlafrdIscPN1TAIE+pE13Lzo2heXQilJLJdxRqEGqA5rZWWmC3ehh+M8nxIAVaPBm0WPOy1UwGiFAyrOSdPwtSJb8zSpQIajTpapTNim/w3/lHAwbFo2kGkR0MfwvTT2s30PT1imMJBZpvJoDdf4JhVEYRbYj0or7h4fhr96cd1EhyVq21dDPq6zMW14CZ7hRMqhFeozK9jwgqFwkqVbWbMhGpcdovFdu84KKUwqRMDDFrBfUMnY3frW0fNwN873SoFJFNFWQOZ9iLkkxMIS75mIHvdPKYx7VLOyviEC7lCZFBQP5y5gn857+y/5d2nO687HttAd626/D3e7CLjLAT0++4720rxfK+vtOzY4uk8lUtT5cO4CHt7t9WDYGO9bt2ahtqFuM1qiG9aU34NVzhhrbY3hx2xo7/j5YpZruW1Doh/MN1Q2gXlw/MlHdylHchWwT0dGSdznOKyutbcg5AyQ2Dbih9ZFfpCltfLCjRZydqVzrcTiQXkVKq/SIOpShshmcHR4cEU2BnGXCCTjPCm10/+er1iLu525q2nYi+t+ogHx3CgnchOwZJ29sU48OWOZBRBycph5txnxtVyE+zNd8gBXavk65RZC5uJC+5J1HmGIH35+GBYSh9tjjG0b+9xGsmsS3LWvy86iMW4cXBz8o12DnrwPTcNX8jAiuRRy9AObATTkE10qCLEqdgPbHTBtGzI3KSPscUpPzj/tjntiX9ovXeFCYB8PqMcNOmkMyFmy01M6mWXVxJ1bWqLWoEEt+1y3uO3zl41xHy1metctejbtzBa/HAdFfDfLHMQ8emF4svLeRo88mV6ZV4FH5hbYHrlsmcif2FfggK+VcfFahmXZc+T7sUMJiQutUO2bEloxHdjn9aYVLBSBy7pfomV7Hr7M7ISwIV8mY2KLQryfwUvaLuO6nX39HzBZb8gT7GvxgfUE9yhDshfw+sYXvmVmjw8PSu084txqm7F+9etiVe1/uvZDEi5h2d0d4vJT5Vpgs7yGrk+y1pIPsMdCt4pwl6fhw3nwOHmcDWfqQnuVuBph3U4qmZFb3Q/oibWsz4KAwrRFCj4w/L27NBaanLdGcsc2Url20C/J6o4jHkzpPaPGGEtobVNGZPbv8/em0eT6Z1B9fEumDjnpv+QrWW1umR0jDQI/ixps7NYjUEtOl8hHD6eV5bFSJgKWnc7XOUYuYwtqiWSiyUeMuZ1VM7xMBCzWlwDwEE+La1pZaWZhAftsfQHwFdFMFlZ4YQHD+gKQjjNePBZeSMCwvgCkh8ncXPSiw0IChvUFYCEWzkinFrDz340H9y3nYHCpoNZ4f1/bZqQXscKpBTxoUEfDZfaA6bcEaoncSCL/WcgKp3ehIx3us6H4hfegWlz4Tke3FDbpb62lErDcstHSSobhQteWqKljjYqWXPupFKQSMGd4zzVv5MXJs6UJ8JfhFUgdDNJ5tIkFPDx8vkGKaP5G0RsJssOYDdJDJ42hSSzgPusSryPyP1sOcoB1ve9pklmJBexTh4PYGHOdQK1YXW1n1xKoINIksxIJWObOKO2D3EEcXC9MU5/XlSaZlUjAHOhJXr3KhUsKXX+QHta5Vs0g2TpN5kIrqLyaivRuArXAFXAYnYnLpCc8sQWs2H12d0IbEe0QqAVykV8a7ZNOWknc6NgC1uo+O/Ea3iyrNSsoB9eD2rDKTTuJGx3fhVbqPkcDvgvx1hPpBkqejFhJQhI3OpaAJSWv0n1m3vn8s2wbaQNd9F/jDxTOrIrtRscSsLmgL4Mrb9rxp24HBjVG4mGjMR6OWXwUz4VWWAghcS8BQM6V7sqIF9JETM3NFfDwTmWHNGFdZ8S9YJzBa7StzJWOVXw0V8CNH3SJV96k/vf0gAAYQ1zpiPguKaJxcb724rjQHdKEPTrQOnMI5MtwMmCX9NCZ9w1zBcysJ/4V61vkDFqgEEVnw3G0N1PA6krSlB7cg+IYjjvtkgas9ubFwTMF3DzVI15YXxAbRRv9vGYUs13oQFH8C+sLYiJWWE1GerCIgBWd/zYUlsyB8jCGH5MOOrP+52wBq2kKxvs49wVJ6C/pOGpkmt3Xa6qAhwksFV0s2BDqnUEihrODu+Q587qqThWwpgTW2SkEDNLA+6SAWQUd011oPe5zF4UbIA1NJZ4bz7gJOFXAiq4PqthFgX9I3kRDNpqZpsbBUwU8L3j2hgaFBEBq+Bl5zqz5Xupd6OOPXWUNAOkI/E9kzZrvNV3AKjLQ3CUAFuFH/z24WZnoiQJ2Xe0VYP9hBwTAApxd0lGRtbRE8QVsGkrOf/X1OgKe4VrQKlhHZ1NC2okC5oaauao9AmBBNKyjIEhigY2S4d0NwvkvWBgm/pI8Z5ompwlYhQvd7MMCg8WJyH9DME2TwZQvqhDw6SksMFgcZv/XUcD024lfn/RFe3D8LikAJZQgE4wKC7w86euJB3wDUDU4UODJsYnvQrPSKYQAVBVOEgMDAHQwOQZmHUksAOqCoSQWWMkxEgBZoKTuoXoudJzZMQBUGdUCnlbgDUBdQBIL1B4tlYeTUC3gfhPHXWBxtFQeTkK1gM0ALjRYHC2Vh5NQLeBpV6wASITiY9PJAlZQ3C1oufYIvGeZ/GeiJieXUioo7haYSK3rAzxCQRKLkwhYC9YC/44AWAAt/d+mMa2UUokFVtK7GniLlv5vhrg36evTSil1xMBzBj8BMBc1I4QmM+U6of89gkZcuIREFkgPsw4vjnly+6iJAtbQI2gM1TsoKBctJxmRoW8nfX2yBVYSAwtRBAGDheiQAqZpcpqAe6QE6wJdJwBSsLLW7pASkrnQkSIX2lAbiSyQCkUJLJNEwBeMrpGdzd/AjQZp0OO9TSuumijg0yVd/ZbNgG4QAElhHfGvcPRJONGoThSwloFPIxAHg6S4+FfPPeCpBnVqKaWWaiwH4mCQELu+FXltPDWknSpgNqxq9m7zIm0RADEJyLxPSpg1BzuY8SRViSxS9IaAchH32SgaXjArnJ0l4B7porP6J903S0AxcGBukiYalNyFHrxGXVKGMchGgxgYPdlnof9/KQQsmWgtnTl+wpjbSGaBWVgvbUub+zxrCufsC/1GnRVuNV+nOwTANCJzjxRhaHYyeY6AdWWiBTbK4htQGNqsr4NnJ5PntdTpkjLkDZI3igB4FWXW1xHM1uBMAfeXtB0lnWMicx+xMBhHpfWl2QksYaaAh4ksjSJGLAx+iUbra7U3K4ElzO1KaQw/I43YjPTaWnuZQO1ZWbt6T6P1jaO9OG1lu6STVp/NIwK1xm3izNukk+68b5grYI0FHWN0VtbbcKVrzIDNU1LK4GUGAnZxsF4rbDH3UGJZT1bWr97X6Dqfw9158a8QbzKD1jj4nJZNYDxBVrperK5fvW1FoNn72o/zTXFHq3RJMbILNy+aJwRqgXhcRm/c6+AgnuaYYrLy3sY3ijoYTCYwD44/+egugcoiSSuJe/W6zuf1z0eHB1fifG/s4WY2pf2YtBPxnZX3ruo7DwSxqIJ4HczduN8aW8BsaI+qgOFtiLh6VEa8FhNQbGMZ24UWKuFGj4A7XRncKYNNVFZBvEncZyHRfOBKuNEjxJ1e3/gQ1Vq6+eN6+4Yx1bC8jgTus5BIwJVxo3+mLW4XRKwTKZFksqcLVfEKKZn7LCRyoYXV9Y0vKrPbjcNm+/jTj3YIeI9suMMy2Q5ViKTus5DIAguVcqPHkeTW+gassedIgUY/MB9SxcTrMJzYgCQWcH+JHlB16did/Qtkqf1j5c/tjmywhvhBlVzmcRopCqYSu9CCvJBUxR1wDNeLN+Cdo0/CXQKl4Y6HAnPPmKo37uf948MwcVfVxBbYkcLUa0PifBOZRxLzo0VP8YhwV9/beCQeUfXFS2J+U3m2qSywkO+ZMHdlnEQQ/NwNxETUElHZX3jD/qlDBTOyyI0BdZ8/D3sEckFcZRq47hkdqglpklcjmpSWiB/azG2msaL8QxqGN+cJxLlV8gbbn19URtz9HGuR+/aXtJZhNzK8//lhWLVjtVKQm2LN1yO5PXTDird+Vz8X8GhTW+Dltn3RfzRfZGqFmXeOPw23kzxldc26twUKeRxnlZm6JuDHxx+HXQKxcUdBDbphN0WZadWhmiJr6OwlX4tz93fK89OzstbeztgKd48PDzYpIbKZNH6gbXuof5vKQqZYGOpywHKPM5w2kLmuOCv7G2rTILKC5Y79EposkNgs3j36NLxFKVlIwM4K/2C+oSxZoKBCrLEJzH0fjhlkZ3UTHgN+Jt0FpT1o2l1WIy7MaVDHRNEGBDudpuEri+RUFhKwsLre3jWU8TSEBUTs+a0UscpWxCbkIDgwTD3NwharurRErTOmNgc2wWjMhs0Yt+2qWq7qWW2WLGp93d9BCzIsa/uCsiYwD/rfBTtpFrfSq2V7/Zd8S4OY5QIBSykjRLoQi1pfoUEL8tVXL07e/P1lSYFn6yIZ/ufGBfrr7y5f/vKb/3nxPMlT5Xd6+63L+9bCycG494tM3G37Zv7L8XH4ghTwzVcvnr/x5uWL9hfvEEiFWN/PDsOFy5IXtsBCblZ4CDPtNiLeSbpbud5Ixjz12lLY5Fcz4msaz5ZX3tuQm0CJq4dANtZXSFeJ9QruF8mxOksqcdJc+3OZ4IHnVWMm+cbkC/1/4FvuKA0kQqxvVu95JgIW3CWHHAeCSzybRsTHfwsfGOKH5CW8d3wYqr0cIj3DjeGFkjB1wxUrRZSZUclMwK4BfJSvUEYiTtrjefCanBH7ZymahtS39Dl+7gpYugRiYZgfZ+lxZSZgQaxw3kJJ0+PZR0uRpRtVOjW43JIFoo2klYbzyFTAIpSIuAir0ln509X7SZ7gLAX70xIoSzeqbGCFY5LDRpepgIVhgX+X8kaa0snNlQT4k3Th6t1oghWeA+8dPc/+bnnmAhaaBbmrPDCPksTDvrjSbJI1LtPA0MOpTaloUvLKd+Qi4LyPlUa4ePhSlOgyhVtoEZeaPGpU1N2sbL+0ReH8jgpzEbBQRELLkcKVlqOl8ly+CrrPP9Ml8AvySFyNk5uAC3VXB8mvNFpLvF2GiKXTCFUU5cPg8yHgDyhHchOwIO5qQUUUnTR9q0oScZcqimzaqMz6GVn7ed8Lz1XAQlFFFCYy99MM8R6KeLOohRcEVV/gqofBZ4asp8FL2qacyV3ABbrSrebrlGoiu3gKDSfivJMw3K16pw6540yAZD0VcTU0dwELhWV+jbmdxgoLklg6Ogy35JZIpkK2RytSdSVW/vgw3KSKwxBwrlnnX/0oKpBiGsLz3SwuCIw6X1qLcjNpG1u7AfQion0ZBtc/rVcrHXfZn5KVulYL7ha5UadvK5vmh1lX2s21yfV+rutyuLCAhzvorny4hmxLrlWMfLTsrvfuL34i0ZdDyxOefUe9Ogn2VYI+9Uyhq8ofztsiU6GFQoVaYGFlrS39nJ9SnjSsu4o2r6WQd3MHnzED/uDzz4rtFV5IDDyOi4fzProZZNtwHoC52Li3aPEKhQtYcEc3+d4M6iStzgIgNcx7eVZbzaIUAQu53wyCFQYFIGu4/32xce84pQlYzocb+RZQdFbW26nOhQGIw2iWV5lJy9IELLhMr9SK5nYNzdyHKw1yw67dsi+mlCpgQSqTOM8ij4F5krQRHgDzYHsk6kNVXekCFlyngvwy06003SwBmIrNOOfRXSMNXghYyPNmkFz8t2eTH6a5sQTAL0gxAjdPFh6tkiVff/Wi+8ZblzmnkR1LMkXgjXfeab395uW/yfgVApnz1lt/aEVM1UweeiZewRsLPEIsca53iCO+Iy41rDFIglxw8U28QuGllHFZXb+6a4Wc7djSV3BHWAHvNAZU5TY3hVLFUkoRr9xUIw/xVsBCESIeY48D3s9LzKMkWtU3iqoJ2GfxCl4LWFhZa2/bnH2hVVVimY0M42Y+MIZCbtBJs0+901M6mXRoPxp0PWhQK4poOQioZZ+3zGTeHR94bTcIOXrYpQpTJQH7Ll7B+4tfEhNbEVORIh4OBreiMzfcDjcg6tsHzYvuTvPEZ/TlU3S+I5rop7/nlQdADXJU5GHM+yreJbEmUVYHSVBTPMw2T0OFgAUn4pIbsoM6wHe1iFdQI2Bh2JB9EyM8QOZI7zLDt7TNa1YlYEEaAjQjvob+wyArZC0x86Yv5ZFJUCdgQY5iGueWuNItWkEhhLKWtLb7VSlgQUR8/OnBNSS3QFqk4q//kjc1n82rFfCIn5JbiItBIvju54fhHe0dRNULWJDkFuJiEAcX7wZ8TVuyahqVELAgbtDZa3ytoGFqqZDqLALlwbx39pKvVWm8TaVacEufLfvpzupaO5TKrWFFFSiQvo+vuYRXxhVnVMLqjlMZCzyOHAcUM6wM+A+7Y8equMyvUtkhGMPM4pa1xl1Y4xoysroVFe6ISlrgcWCN60i1re44tRhDBWtcE2pidcepvAUeR6zx0eHBFRR/VA9XlPE9X6mTeIVaCXiEFH9kPsgblATLsLzNKhRlpKGWAhbErZZuC9zna6ip1ocr2rHClWHabuJlTamtgEccHYWh1FTLVTJUcilgeO1PQqE6C3dE7QU8YhQfQ8ieMkxQSZyr8dpfXtQiC52E4eLYtRnrLcN006ZHOgRK47zBoCSoaLeOMe48IOApjIS8stbuMNOWIbNwe1uOqm/Z+0sUNn+gDJDkFMkMoi6BqXjfVtYXpF3qgGnbWuTrac+RJfNdhwbyK+sbT+2nDiXl3E0W4T5EfBsPCDgFqdxrRZ0OF0W8FmLzNP4zOLSi3e+f0gO4ycmAgBdArPIZ052AzPuzrLLEcHJOSTVi5Z/adygw96d+g7W2xvBjNrQHa5seCDgjxOpYqyyN4M87v7sFSl/WeYGONjj3mjC17E52YvMJPRPRY2ttQ1hbAAAAAAAAAAAAAAAAAAAAAAAA4Jf8P8WdqoAaqCHmAAAAAElFTkSuQmCC)Github](https://github.com/payOSHQ/payos-demo-nodejs)

## Tài liệu[​](#tài-liệu "Đường dẫn trực tiếp đến Tài liệu")

Xem [tài liệu API payOS](https://payos.vn/docs/api/) để biết thêm thông tin.

## Cài đặt thư viện payOS cho dự án NodeJS[​](#cài-đặt-thư-viện-payos-cho-dự-án-nodejs "Đường dẫn trực tiếp đến Cài đặt thư viện payOS cho dự án NodeJS")

Cài đặt gói có tên là `@payos/node` vào dự án của bạn:

```
npm install @payos/node
# hoặc
yarn add @payos/node
```

## Khởi tạo đối tượng `PayOS`[​](#khởi-tạo-đối-tượng-payos "Đường dẫn trực tiếp đến khởi-tạo-đối-tượng-payos")

Bạn cần khởi tạo đối tượng `PayOS` bằng `Client ID`, `API Key` và `Checksum Key` của kênh thanh toán mà bạn đã tạo.

Xem hướng dẫn

```
// CommonJS
const PayOS = require("@payos/node");

const payOS = new PayOS(
  "YOUR_PAYOS_CLIENT_ID",
  "YOUR_PAYOS_API_KEY",
  "YOUR_PAYOS_CHECKSUM_KEY"
);

// ES Modules
import PayOS from "@payos/node";

const payOS = new PayOS(
  "YOUR_PAYOS_CLIENT_ID",
  "YOUR_PAYOS_API_KEY",
  "YOUR_PAYOS_CHECKSUM_KEY"
);
```

## Các phương thức có trong đối tượng `PayOS`[​](#các-phương-thức-có-trong-đối-tượng-payos "Đường dẫn trực tiếp đến các-phương-thức-có-trong-đối-tượng-payos")

| Phương thức               | Kiểu tham số đầu vào                                              | Mô tả                                                                                                            | Kiểu trả về                         |
| ------------------------- | ----------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- | ----------------------------------- |
| createPaymentLink         | `CheckoutRequestType`                                             | Tạo link thanh toán cho dữ liệu đơn hàng                                                                         | `Promise<CheckoutResponseDataType>` |
| getPaymentLinkInformation | `string \| number`                                                | Lấy thông tin thanh toán của đơn hàng đã tạo link thanh toán.                                                    | `Promise<PaymentLinkDataType>`      |
| cancelPaymentLink         | - orderId: `string \| number`<br />- cancellationReason: `string` | Hủy link thanh toán của đơn hàng.                                                                                | `Promise<PaymentLinkDataType>`      |
| confirmWebhook            | `string`                                                          | Xác thực URL Webhook của kênh thanh toán và thêm hoặc cập nhật URL Webhook cho Kênh thanh toán đó nếu thành công | `Promise<string>`                   |
| verifyPaymentWebhookData  | `WebhookType`                                                     | Xác minh dữ liệu nhận được qua webhook sau khi thanh toán                                                        | `WebhookDataType`                   |

### Tạo link thanh toán[​](#tạo-link-thanh-toán "Đường dẫn trực tiếp đến Tạo link thanh toán")

Phương thức `createPaymentLink` có chức năng tạo link thanh toán cho dữ liệu đơn hàng với tham số đầu vào là `requestData` có kiểu dữ liệu `CheckoutRequestType` và trả về `Promise<CheckoutResponseDataType>`. Link thanh toán kiểm soát những gì khách hàng của bạn nhìn thấy trên trang thanh toán, chẳng hạn như Tên sản phẩm, số lượng đặt, số tiền cũng như số tài khoản thụ hưởng, tên ngân hàng. Các trường dữ liệu bắt buộc trong kiểu dữ liệu `CheckoutRequestType`:

* **orderCode**: Mã đơn hàng
* **amount**: Số tiền của đơn hàng
* **description**: Mô tả đơn hàng
* **returnUrl**: Đường dẫn sẽ được chuyển tiếp đến trang web hoặc ứng dụng của bạn khi người dùng đã thanh toán đơn hàng thành công
* **cancelUrl**: Đường dẫn sẽ được chuyển tiếp đến trang web hoặc ứng dụng của bạn khi người dùng bấm hủy đơn hàng

Xem hướng dẫn

```
const body = {
  orderCode: 1234,
  amount: 2000,
  description: "Thanh toan don hang",
  items: [
    {
      name: "Mi tom hao hao",
      quantity: 1,
      price: 2000,
    },
  ],
  cancelUrl: "http://localhost:3000/cancel.html",
  returnUrl: "http://localhost:3000/success.html",
};

const paymentLinkRes = await payOS.createPaymentLink(body);
```

### Lấy thông tin link thanh toán[​](#lấy-thông-tin-link-thanh-toán "Đường dẫn trực tiếp đến Lấy thông tin link thanh toán")

Phương thức `getPaymentLinkInformation` lấy thông tin thanh toán của đơn hàng đã tạo link thanh toán với tham số là `orderId`. `orderId` có thể là ID link thanh toán với kiểu dữ liệu là `string` (ví dụ: a7a9454060cd48909864b3747289ff38) hoặc Mã đơn hàng với kiểu dữ liệu là `number` (ví dụ: 1234) và trả về `Promise<PaymentLinkDataType>`

Xem hướng dẫn

```
const paymentLink = await payOS.getPaymentLinkInformation(
  "a7a9454060cd48909864b3747289ff38"
);
// hoặc
const paymentLink = await payOS.getPaymentLinkInformation(1234);
```

### Hủy link thanh toán[​](#hủy-link-thanh-to án "Đường dẫn trực tiếp đến Hủy link thanh toán")

Phương thức `cancelPaymentLink` giúp bạn hủy link thanh toán của đơn hàng với 2 tham số đầu vào là `orderId` có kiểu dữ liệu `string` hoặc `number` (như đã mô tả ở mục [Lấy thông tin link thanh toán](#l%E1%BA%A5y-th%C3%B4ng-tin-link-thanh-to%C3%A1n)) và `cancellationReason`, có kiểu dữ liệu `string`. Tham số `cancellationReason` là tham số không bắt buộc, do đó ta có thể bỏ qua tham số này. Phương thức này sẽ trả về `Promise<PaymentLinkDataType>`.

Xem hướng dẫn

```
const cancelledPaymentLink = await payOS.cancelPaymentLink(1234, "reason");

// Nếu bạn muốn hủy link thanh toán mà không cần lý do:
const cancelledPaymentLink = await payOS.cancelPaymentLink(1234);
```

### Xác nhận Webhook URL[​](#xác-nhận-webhook-url "Đường dẫn trực tiếp đến Xác nhận Webhook URL")

Xác nhận Webhook URL của kênh thanh toán và cập nhật URL Webhook cho Kênh thanh toán với phương thức `confirmWebhook`. Tham số đầu vào có kiểu dữ liệu là `string` và trả về `Promise<string>`.

Xem hướng dẫn

```
await payOS.confirmWebhook("https://your-webhook-url/");
```

### Xác minh dữ liệu Webhook[​](#xác-minh-dữ-liệu-webhook "Đường dẫn trực tiếp đến Xác minh dữ liệu Webhook")

Phương thức `verifyPaymentWebhookData` dùng để xác minh dữ liệu nhận được qua webhook sau khi thanh toán, tham số đầu vào có kiểu dữ liệu `WebhookType`, kiểu dữ liệu trả về là `WebhookDataType`.

Xem hướng dẫn

```
/* Dữ liệu webhook mẫu khi nhận từ hệ thống payOS
req.body = {
  "code": "string",
  "desc": "string",
  "data": {
    "orderCode": 123,
    "amount": 3000,
    "description": "VQRIO123",
    "accountNumber": "12345678",
    "reference": "TF230204212323",
    "transactionDateTime": "2023-02-04 18:25:00",
    "currency": "VND",
    "paymentLinkId": "124c33293c43417ab7879e14c8d9eb18",
    "code": "00",
    "desc": "Thành công",
    "counterAccountBankId": "",
    "counterAccountBankName": "",
    "counterAccountName": "",
    "counterAccountNumber": "",
    "virtualAccountName": "",
    "virtualAccountNumber": ""
  },
  "signature": "8d8640d802576397a1ce45ebda7f835055768ac7ad2e0bfb77f9b8f12cca4c7f"
}; */
const webhookData = payOS.verifyPaymentWebhookData(req.body);
```

## Các kiểu dữ liệu[​](#các-kiểu-dữ-liệu "Đường dẫn trực tiếp đến Các kiểu dữ liệu")

Chúng tôi cung cấp danh sách kiểu dữ liệu sử dụng trong thư viện payOS cho NodeJS

### Kiểu dữ liệu CheckoutRequestType[​](#kiểu-dữ-liệu-checkoutrequesttype "Đường dẫn trực tiếp đến Kiểu dữ liệu CheckoutRequestType")

```
export type CheckoutRequestType = {
  orderCode: number, // Mã đơn hàng
  amount: number, // Số tiền của đơn hàng
  description: string, // Mô tả đơn hàng, được sử dụng làm nội dung chuyển khoản
  cancelUrl: string, // URL của trang web hoặc ứng dụng sẽ được chuyển hướng tới khi khách hàng hủy thanh toán
  returnUrl: string, // URL của trang web hoặc ứng dụng sẽ được chuyển hướng tới khi khách hàng thanh toán thành công
  signature?: string, // Chữ ký cho dữ liệu của đơn hàng, có chức năng kiểm tra tính toàn vẹn của dữ liệu
  items?: { name: string, quantity: number, price: number }[],
  buyerName?: string, // Tên người mua hàng
  buyerEmail?: string, // Email người mua hàng
  buyerPhone?: string, // Số điện thoại người mua hàng
  buyerAddress?: string, // Địa chỉ người mua hàng
  expiredAt?: number, // Thời gian hết hạn của link thanh toán
};
```

### Kiểu dữ liệu CheckoutResponseDataType[​](#kiểu-dữ-liệu-checkoutresponsedatatype "Đường dẫn trực tiếp đến Kiểu dữ liệu CheckoutResponseDataType")

```
export type CheckoutResponseDataType = {
  bin: string, // Mã BIN ngân hàng
  accountNumber: string, // Số tài khoản của kênh thanh toán
  accountName: string, // Tên chủ tài khoản của kênh thanh toán
  amount: number, // Số tiền của đơn hàng
  description: string, // Mô tả đơn hàng, được sử dụng làm nội dung chuyển khoản
  orderCode: number, // Mã đơn hàng
  currency: string, // Đơn vị tiền tệ
  paymentLinkId: string, // ID link thanh toán
  status: string, // Trạng thái của link thanh toán
  checkoutUrl: string, // Đường dẫn trang thanh toán
  qrCode: string, // Mã QR thanh toán
};
```

### Kiểu dữ liệu PaymentLinkDataType[​](#kiểu-dữ-liệu-paymentlinkdatatype "Đường dẫn trực tiếp đến Kiểu dữ liệu PaymentLinkDataType")

```
export type PaymentLinkDataType = {
  id: string, // ID link thanh toán
  orderCode: number, // Mã đơn hàng
  amount: number, // Số tiền của đơn hàng
  amountPaid: number, // Số tiền đã thanh toán
  amountRemaining: number, // Số tiền cần thanh toán còn lại
  status: string, // Trạng thái của link thanh toán
  createdAt: string, // Thời gian tạo link thanh toán
  transactions: TransactionType[], // Danh sách các giao dịch của link thanh toán
  cancellationReason: string | null, // Lý do hủy link thanh toán nếu liên kết đã bị hủy/
  canceledAt: string | null, // Thời gian hủy link thanh toán
};
```

### Kiểu dữ liệu TransactionType[​](#kiểu-dữ-liệu-transactiontype "Đường dẫn trực tiếp đến Kiểu dữ liệu TransactionType")

```
type TransactionType = {
  reference: string, // Mã tham chiếu của giao dịch
  amount: number, // Số tiền chuyển khoản của giao dịch
  accountNumber: string, // Số tài khoản nhận tiền (là số tài khoản của kênh thanh toán)
  description: string, // Nội dung chuyển khoản
  transactionDateTime: string, // Ngày giờ giao dịch
  virtualAccountName: string | null, // Tên chủ tài khoản ảo
  virtualAccountNumber: string | null, // Số tài khoản ảo
  counterAccountBankId: string | null, // ID ngân hàng đối ứng
  counterAccountBankName: string | null, // Tên ngân hàng đối ứng
  counterAccountName: string | null, // Tên chủ tài khoản đối ứng
  counterAccountNumber: string | null, // Số tài khoản đối ứng
};
```

### Kiểu dữ liệu WebhookType[​](#kiểu-dữ-liệu-webhooktype "Đường dẫn trực tiếp đến Kiểu dữ liệu WebhookType")

```
export type WebhookType = {
  code: string, // Mã lỗi
  desc: string, // Mô tả lỗi
  success: boolean, // Trạng thái của webhook
  data: WebhookDataType, // Dữ liệu Webhook
  signature: string, // Chữ ký số của dữ liệu Webhook, dùng để kiểm tra tính toàn vẹn của dữ liệu
};
```

### Kiểu dữ liệu WebhookDataType[​](#kiểu-dữ-liệu-webhookdatatype "Đường dẫn trực tiếp đến Kiểu dữ liệu WebhookDataType")

```
export type WebhookDataType = {
  orderCode: number, // Mã đơn hàng
  amount: number, // Số tiền của giao dịch chuyển khoản
  description: string, // Mô tả đơn hàng, được dùng làm nội dung chuyển khoản
  accountNumber: string, // Số tài khoản của kênh thanh toán
  reference: string, // Mã đối ứng của giao dịch chuyển khoản
  transactionDateTime: string, // Ngày giờ diễn ra giao dịch chuyển khoản
  currency: string, // Đơn vị tiền tệ
  paymentLinkId: string, // ID link thanh toán
  code: string, // Mã lỗi
  desc: string, // Mô tả lỗi
  counterAccountBankId?: string | null, // ID ngân hàng đối ứng
  counterAccountBankName?: string | null, // Tên ngân hàng đối ứng
  counterAccountName?: string | null, // Tên chủ tài khoản đối ứng
  counterAccountNumber?: string | null, // Số tài khoản đối ứng
  virtualAccountName?: string | null, // Tên chủ tài khoản ảo
  virtualAccountNumber?: string | null, // Số tài khoản ảo
};
```
