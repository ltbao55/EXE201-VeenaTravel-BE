<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VeenaTravel AI Chat - Demo for Frontend</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }

    .header p {
      opacity: 0.9;
    }

    .demo-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }

    @media (max-width: 768px) {
      .demo-grid {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .card h2 {
      color: #667eea;
      margin-bottom: 15px;
      font-size: 1.3rem;
    }

    .input-group {
      margin-bottom: 15px;
    }

    .input-group label {
      display: block;
      margin-bottom: 5px;
      color: #555;
      font-weight: 500;
    }

    .input-group input,
    .input-group textarea {
      width: 100%;
      padding: 10px;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      font-size: 14px;
    }

    .input-group input:focus,
    .input-group textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s;
    }

    button:hover {
      transform: translateY(-2px);
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .quick-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .quick-btn {
      padding: 8px 16px;
      font-size: 14px;
      background: #f0f0f0;
      color: #333;
    }

    .response-section {
      margin-top: 20px;
    }

    .ai-response {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 15px;
      white-space: pre-wrap;
      max-height: 400px;
      overflow-y: auto;
    }

    .locations-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .location-card {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }

    .location-card:hover {
      transform: translateY(-4px);
    }

    .location-card img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }

    .location-card .content {
      padding: 10px;
    }

    .location-card h3 {
      font-size: 14px;
      margin-bottom: 5px;
      color: #333;
    }

    .location-card p {
      font-size: 12px;
      color: #666;
      margin-bottom: 5px;
    }

    .location-card .time {
      font-size: 12px;
      color: #667eea;
      font-weight: 600;
    }

    .stats {
      display: flex;
      gap: 20px;
      margin-top: 15px;
      padding: 15px;
      background: #f0f4ff;
      border-radius: 6px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-item .value {
      font-size: 24px;
      font-weight: 700;
      color: #667eea;
    }

    .stat-item .label {
      font-size: 12px;
      color: #666;
      margin-top: 5px;
    }

    .loading {
      text-align: center;
      padding: 20px;
      color: #667eea;
    }

    .error {
      background: #fee;
      color: #c33;
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
    }

    .json-viewer {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      overflow-x: auto;
      max-height: 500px;
    }

    .suggestions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .suggestion-btn {
      padding: 8px 16px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 20px;
      font-size: 14px;
      cursor: pointer;
    }

    .suggestion-btn:hover {
      background: #5568d3;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ü§ñ VeenaTravel AI Chat</h1>
      <p>Demo t√≠ch h·ª£p Frontend - Test response t·ª´ API</p>
    </div>

    <div class="demo-grid">
      <!-- Input Section -->
      <div class="card">
        <h2>üìù G·ª≠i tin nh·∫Øn</h2>
        <div class="input-group">
          <label>API Endpoint:</label>
          <input type="text" id="apiUrl" value="http://localhost:5001/api/chat/message">
        </div>
        <div class="input-group">
          <label>User ID:</label>
          <input type="text" id="userId" value="demo-user-123">
        </div>
        <div class="input-group">
          <label>Message:</label>
          <textarea id="message" rows="3" placeholder="V√≠ d·ª•: T√¥i mu·ªën ƒëi ƒê√† N·∫µng 2 ng√†y, th√≠ch bi·ªÉn"></textarea>
        </div>
        <button id="sendBtn">üöÄ G·ª≠i tin nh·∫Øn</button>

        <div class="quick-buttons">
          <button class="quick-btn" data-msg="T√¥i mu·ªën ƒëi ƒê√† N·∫µng 2 ng√†y, th√≠ch bi·ªÉn">ƒê√† N·∫µng 2 ng√†y</button>
          <button class="quick-btn" data-msg="T√¥i mu·ªën ƒëi V≈©ng T√†u 1 ng√†y">V≈©ng T√†u 1 ng√†y</button>
          <button class="quick-btn" data-msg="T√¥i mu·ªën ƒëi ƒê√† L·∫°t 3 ng√†y v·ªõi gia ƒë√¨nh">ƒê√† L·∫°t 3 ng√†y</button>
        </div>
      </div>

      <!-- Stats Section -->
      <div class="card">
        <h2>üìä Th·ªëng k√™ Response</h2>
        <div class="stats">
          <div class="stat-item">
            <div class="value" id="locationCount">-</div>
            <div class="label">Locations</div>
          </div>
          <div class="stat-item">
            <div class="value" id="photoCount">-</div>
            <div class="label">Photos</div>
          </div>
          <div class="stat-item">
            <div class="value" id="daysCount">-</div>
            <div class="label">Days</div>
          </div>
          <div class="stat-item">
            <div class="value" id="responseTime">-</div>
            <div class="label">Response Time</div>
          </div>
        </div>
        <div id="errorMsg"></div>
      </div>
    </div>

    <!-- AI Response -->
    <div class="card">
      <h2>üí¨ AI Response</h2>
      <div id="loading" class="loading" style="display: none;">
        ‚è≥ ƒêang x·ª≠ l√Ω...
      </div>
      <div class="ai-response" id="aiResponse">
        Ch∆∞a c√≥ response...
      </div>
      <div class="suggestions" id="suggestions"></div>
    </div>

    <!-- Locations Grid -->
    <div class="card">
      <h2>üìç Locations v·ªõi Photos</h2>
      <div class="locations-grid" id="locationsGrid">
        Ch∆∞a c√≥ locations...
      </div>
    </div>

    <!-- JSON Viewer -->
    <div class="card">
      <h2>üîç Full Response JSON</h2>
      <pre class="json-viewer" id="jsonViewer">Ch∆∞a c√≥ response...</pre>
    </div>
  </div>

  <script>
    const sendBtn = document.getElementById('sendBtn');
    const apiUrl = document.getElementById('apiUrl');
    const userId = document.getElementById('userId');
    const message = document.getElementById('message');
    const loading = document.getElementById('loading');
    const aiResponse = document.getElementById('aiResponse');
    const locationsGrid = document.getElementById('locationsGrid');
    const jsonViewer = document.getElementById('jsonViewer');
    const errorMsg = document.getElementById('errorMsg');
    const suggestionsDiv = document.getElementById('suggestions');

    // Quick buttons
    document.querySelectorAll('.quick-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        message.value = btn.dataset.msg;
      });
    });

    // Send message
    sendBtn.addEventListener('click', async () => {
      const startTime = Date.now();
      
      if (!message.value.trim()) {
        alert('Vui l√≤ng nh·∫≠p message!');
        return;
      }

      loading.style.display = 'block';
      sendBtn.disabled = true;
      errorMsg.innerHTML = '';
      aiResponse.textContent = 'ƒêang x·ª≠ l√Ω...';
      locationsGrid.innerHTML = 'ƒêang t·∫£i...';
      jsonViewer.textContent = 'ƒêang t·∫£i...';

      try {
        const response = await fetch(apiUrl.value, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            message: message.value,
            userId: userId.value
          })
        });

        const data = await response.json();
        const responseTime = Date.now() - startTime;

        if (data.success) {
          // Display AI Response
          aiResponse.textContent = data.data.response || 'Kh√¥ng c√≥ response';

          // Display Suggestions
          suggestionsDiv.innerHTML = '';
          if (data.data.suggestions && data.data.suggestions.length > 0) {
            data.data.suggestions.forEach(sug => {
              const btn = document.createElement('button');
              btn.className = 'suggestion-btn';
              btn.textContent = sug;
              btn.onclick = () => {
                message.value = sug;
              };
              suggestionsDiv.appendChild(btn);
            });
          }

          // Display Locations
          locationsGrid.innerHTML = '';
          if (data.data.locations && data.data.locations.length > 0) {
            data.data.locations.forEach(loc => {
              const card = document.createElement('div');
              card.className = 'location-card';
              card.innerHTML = `
                ${loc.photoUrl ? `<img src="${loc.photoUrl}" alt="${loc.name}">` : ''}
                <div class="content">
                  <h3>${loc.name}</h3>
                  <p>${loc.address || 'N/A'}</p>
                  <div class="time">‚è∞ Day ${loc.day} - ${loc.time}</div>
                </div>
              `;
              locationsGrid.appendChild(card);
            });
          } else {
            locationsGrid.innerHTML = 'Kh√¥ng c√≥ locations';
          }

          // Display Stats
          const locCount = data.data.locations?.length || 0;
          const photoCount = data.data.locations?.filter(l => l.photoUrl).length || 0;
          const daysCount = data.data.itinerary?.days?.length || 0;

          document.getElementById('locationCount').textContent = locCount;
          document.getElementById('photoCount').textContent = `${photoCount}/${locCount}`;
          document.getElementById('daysCount').textContent = daysCount;
          document.getElementById('responseTime').textContent = `${responseTime}ms`;

          // Display JSON
          jsonViewer.textContent = JSON.stringify(data, null, 2);

        } else {
          throw new Error(data.message || 'API error');
        }

      } catch (error) {
        console.error('Error:', error);
        errorMsg.innerHTML = `<div class="error">‚ùå Error: ${error.message}</div>`;
        aiResponse.textContent = 'Error: ' + error.message;
        jsonViewer.textContent = 'Error: ' + error.message;
      } finally {
        loading.style.display = 'none';
        sendBtn.disabled = false;
      }
    });

    // Auto-focus message
    message.focus();

    // Enter to send
    message.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendBtn.click();
      }
    });
  </script>
</body>
</html>





